(this["webpackJsonpmeet-friends"]=this["webpackJsonpmeet-friends"]||[]).push([[0],{327:function(e,a,t){e.exports=t(540)},446:function(e,a,t){},518:function(e,a,t){},540:function(e,a,t){"use strict";t.r(a);var n=t(21),r=t(22),l=t(23),s=t(24),o=t(0),c=t.n(o),i=t(25),u=t.n(i),d=t(596),m=t(594),h=t(593),p=t(577),f=t(543),g=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(m.a,{as:h.a,inverted:!0,vertical:!0,visible:!0,width:"very thin"},c.a.createElement(p.a,null),c.a.createElement(f.a,{icon:"add",size:"small",color:"blue"}))}}]),t}(o.Component),E=t(597),v=t(87),b=t(592),y=t(308),C=t(192),S=t.n(C),O=(t(430),t(432),t(541),{apiKey:"AIzaSyBlji1huTUq206tJcg0r7IAX76STFh-xns",authDomain:"portfolio-alex-eb3ef.firebaseapp.com",databaseURL:"https://portfolio-alex-eb3ef.firebaseio.com",projectId:"portfolio-alex-eb3ef",storageBucket:"portfolio-alex-eb3ef.appspot.com",messagingSenderId:"776158175345",appId:"1:776158175345:web:2140b8f94fedf1103bbbd0",measurementId:"G-5VBPTVC7PQ"});S.a.initializeApp(O);var U=S.a,w=t(85),j=t(282),k=t(56),I={authenticated:!1,authenticatedUser:null},R={currentChannel:null,isPrivateChannel:!1},N={loading:!1,errors:null},A=[j.a],T=Object(w.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_AUTHENTICATED":return Object(k.a)({},e,{authenticated:!0,authenticatedUser:a.payload});case"SET_UNAUTHENTICATED":return Object(k.a)({},I);case"SET_GOOGLE_USER":return Object(k.a)({},e,{authenticated:!0},a.payload);default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_CURRENT_CHANNEL":return Object(k.a)({},e,{currentChannel:a.payload.currentChannel});case"SET_PRIVATE_CHANNEL":return Object(k.a)({},e,{isPrivateChannel:a.payload.isPrivateChannel});default:return e}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_ERRORS":return Object(k.a)({},e,{loading:!1,errors:a.payload});case"CLEAR_ERRORS":return Object(k.a)({},e,{loading:!1,errors:null});case"LOADING_UI":return Object(k.a)({},e,{loading:!0});case"STOP_LOADING_UI":return Object(k.a)({},e,{loading:!1});default:return e}}}),_=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):w.d)(w.a.apply(void 0,A)),P=Object(w.e)(T,{},_),L=t(590),M=t(580),D=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).state={user:e.props.currentUser},e.dropDownOptions=function(){return[{key:"user",text:c.a.createElement("span",null,"Signed as ",c.a.createElement("strong",null,e.state.user?c.a.createElement(o.Fragment,null,e.state.user.displayName.toLowerCase()):c.a.createElement(o.Fragment,null))),disabled:!0},{key:"avatar",text:c.a.createElement("span",null,"Change Avatar")},{key:"signout",text:c.a.createElement("span",null,c.a.createElement(L.a,{onClick:e.handleSignout,type:"submit",variant:"contained",className:"button"},"SignOut"))}]},e.handleSignout=function(){U.auth().signOut().then((function(){P.dispatch({type:"SET_UNAUTHENTICATED"})}))},e}return Object(r.a)(t,[{key:"render",value:function(){var e=this.state.user;return c.a.createElement(d.a,null,c.a.createElement(d.a.Column,null,c.a.createElement(d.a.Row,{style:{padding:"1.2em",margin:0},className:"menu_item"},c.a.createElement(E.a,{inverted:!0,floated:"left",as:"h2",className:"animated slideInLeft delay-1s"},c.a.createElement(v.a,{name:"meetup"}),c.a.createElement(E.a.Content,{style:{fontSize:20}},"Meet-Friends"))),c.a.createElement(E.a,{style:{padding:"0.25em"},as:"h4",inverted:!0},c.a.createElement(b.a,{className:"dropdown",trigger:c.a.createElement(o.Fragment,null,e?c.a.createElement("span",null,c.a.createElement(y.a,{src:e.photoURL,spaced:"right",avatar:!0}),e.displayName):c.a.createElement(M.a,{size:20,disableShrink:!0})),options:this.dropDownOptions()}))))}}]),t}(o.Component),F=(t(446),t(59)),x=t(588),z=t(587),G=t(581),W=t(595),B=t(582),H=t(86),V=t.n(H),q=t(153),X=t.n(q),J=function(e,a){return function(t,n){U.auth().signInWithEmailAndPassword(e,a).then((function(e){if(e){e.user.email;t(Q(e))}})).catch((function(e){t({type:"SET_ERRORS",payload:e})}))}},K=function(e,a){return function(t){e.addScope("".concat(a[0])),a[1]&&e.addScope("".concat(a[1])),U.auth().signInWithPopup(e).then((function(e){if(e.credential){var a,n=e.user,r=n.displayName,l=n.email;a=n.xa;var s=X()(a),o=s.picture,c=s.user_id;t($({email:l,username:r,profileImage:o},c)),t(Q(e))}})).catch((function(e){t({type:"SET_ERRORS",payload:e})}))}},Q=function(e){var a=U.auth().currentUser.uid,t=U.database().ref("users");U.database().ref("/users/"+a).once("value").then((function(n){return null!==n.val()?{type:"SET_ERRORS",payload:{email:"".concat(n.val().email," exists")}}:t.child(e.user.uid).set({email:e.user.email,username:e.user.displayName,profileImage:e.user.photoURL,coverImage:"https://firebasestorage.googleapis.com/v0/b/".concat(O.storageBucket,"/o/").concat("download.png","?alt=media"),userId:a})}))},$=function(e,a){return function(t){t({type:"LOADING_UI"}),V.a.post("/google/".concat(a),e).then((function(e){e.data})).catch((function(e){t({type:"SET_ERRORS",payload:e})}))}},Y=function(e){return function(a){a({type:"SET_CURRENT_CHANNEL",payload:{currentChannel:e}})}},Z=function(e){return{type:"SET_PRIVATE_CHANNEL",payload:{isPrivateChannel:e}}},ee=t(34),ae=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).state={channels:[],channelName:"",channelDetails:"",modal:!1,channelsRef:U.database().ref("channels"),firstLoad:!0,activeChannel:"",loading:!0},e.removeListeners=function(){e.state.channelsRef.off()},e.closeModal=function(){e.setState({modal:!1})},e.openModal=function(){e.setState({modal:!0})},e.handleChange=function(a){a.preventDefault(),e.setState(Object(F.a)({},a.target.name,a.target.value))},e.addListeners=function(){var a=[];e.state.channelsRef.on("child_added",(function(t){a.push(t.val()),e.setState({channels:a},(function(){return e.setFirstChannel()}))}))},e.setFirstChannel=function(){var a=e.state.channels[0];e.state.firstLoad&&e.state.channels.length>0&&(e.setActiveChannel(a),e.props.setCurrentChannel(a)),e.setState({firstLoad:!1})},e.setActiveChannel=function(a){e.setState({activeChannel:a.id,loading:!1})},e.addChannel=function(){var a=e.state,t=a.channelsRef,n=a.channelName,r=a.channelDetails,l=e.props.authenticatedUser,s=l.username,o=l.email,c=l.userId,i=l.profileImage,u=t.push().key,d={id:u,name:n,details:r,createdBy:{name:s,email:o,avatar:i,userId:c}};t.child(u).update(d).then((function(){e.setState({channelName:"",channelDetails:""}),e.closeModal(),console.log("Channel added")})).catch((function(e){console.error(e)}))},e.displayChannels=function(a){return a.length>0&&a.map((function(a){return c.a.createElement(h.a.Item,{key:a.id,onClick:function(){return e.changeChannel(a)},name:a.name,style:{opacity:.8,textAlign:"left"},active:a.id===e.state.activeChannel},"# ",a.name)}))},e.handleSubmit=function(a){e.isformValid(e.state)&&e.addChannel()},e.isformValid=function(e){var a=e.channelName,t=e.channelDetails;return a&&t},e.changeChannel=function(a){e.setActiveChannel(a),e.props.setCurrentChannel(a),e.props.setPrivateChannel(!1)},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"UNSAFE_componentWillMount",value:function(){this.removeListeners()}},{key:"render",value:function(){var e=this.state,a=e.modal,t=e.channels;return c.a.createElement(o.Fragment,null,c.a.createElement(h.a.Menu,{className:"menu_item2"},c.a.createElement(h.a.Item,{style:{textAlign:"left"}},c.a.createElement("span",null,c.a.createElement(v.a,{name:"exchange"})," CHANNELS ")," "," ","(",t.length,") ",c.a.createElement(v.a,{name:"add",className:"add",onClick:this.openModal})),this.displayChannels(t)),c.a.createElement(x.a,{basic:!0,open:a,onClose:this.closeModal},this.props.authenticatedUser?c.a.createElement(o.Fragment,null,c.a.createElement(x.a.Header,null,"Add a Channel "),c.a.createElement(x.a.Content,null,c.a.createElement(z.a,{onSubmit:this.handleSubmit},c.a.createElement(z.a.Field,{className:"form-control",style:{backGroundColor:"#607d8b"}},c.a.createElement(G.a,{fluid:!0,label:"Name of channel",name:"channelName",onChange:this.handleChange})),c.a.createElement(z.a.Field,{className:"form-control"},c.a.createElement(G.a,{fluid:!0,label:"About the channel",name:"channelDetails",onChange:this.handleChange})))),c.a.createElement(x.a.Actions,null,c.a.createElement(f.a,{inverted:!0,color:"green",onClick:this.handleSubmit},c.a.createElement(v.a,{name:"checkmark"})," Add"),c.a.createElement(f.a,{inverted:!0,color:"red",onClick:this.closeModal},c.a.createElement(v.a,{name:"remove"})," Cancel"))):c.a.createElement(W.a,{active:!0},c.a.createElement(B.a,{size:"huge",content:"Please Wait authenticating..."}))))}}]),t}(o.Component),te=Object(ee.b)(null,{setCurrentChannel:Y,setPrivateChannel:Z})(ae),ne=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).state={activeChannel:"",user:e.props.user,users:[],userRef:U.database().ref("users"),connectedRef:U.database().ref(".info/connected"),presenceRef:U.database().ref("presence")},e.addListeners=function(a){var t=e.state,n=t.userRef,r=t.connectedRef,l=t.presenceRef,s=[];n.on("child_added",(function(a){var t=a.val();t.uid=a.key,t.status="offline",e.state.user&&e.state.user.uid!==t.userId&&s.push(t),e.setState({users:s})})),r.on("value",(function(e){if(!0===e.val()){var t=l.child(a);t.set(!0),t.onDisconnect().remove((function(e){null!==e&&console.error(e)}))}})),l.on("child_added",(function(t){a!==t.key&&e.addStatusToUser(t.key)})),l.on("child_removed",(function(t){a!==t.key&&e.addStatusToUser(t.key,!1)}))},e.addStatusToUser=function(a){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.state.users.reduce((function(e,n){return n.uid===a&&(n.status="".concat(t?"online":"offline")),e.concat(n)}),[]);e.setState({users:n})},e.getChannelId=function(a){var t=e.state.user.uid;return a<t?"".concat(a,"/").concat(t):"".concat(t,"/").concat(a)},e.isUserOnline=function(e){return"online"===e.status},e.changeChannel=function(a){var t={id:e.getChannelId(a.userId),name:a.username,photoURL:a.profileImage};e.props.setCurrentChannel(t),e.props.setPrivateChannel(!0),e.setActiveChannel(a.userId)},e.setActiveChannel=function(a){return e.setState({activeChannel:a})},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.state.user&&this.addListeners(this.state.user.uid)}},{key:"render",value:function(){var e=this,a=this.state,t=a.users,n=a.activeChannel;return c.a.createElement(h.a.Menu,{className:"menu_item_direct"},c.a.createElement(h.a.Item,null,c.a.createElement("span",null,c.a.createElement(v.a,{name:"mail"}),"DIRECT MESSAGES")," ","(",t.length,")"),t.map((function(a){return c.a.createElement(h.a.Item,{key:a.userId,active:a.userId===n,onClick:function(){return e.changeChannel(a)},style:{opacity:.8,fontStyle:"italic",textAlign:"left"}},c.a.createElement(v.a,{name:"circle",color:e.isUserOnline(a)?"green":"red"}),c.a.createElement("span",null," ",c.a.createElement(y.a,{src:a.profileImage,spaced:"right",avatar:!0})),a.username.toLowerCase())})))}}]),t}(o.Component),re=Object(ee.b)(null,{setCurrentChannel:Y,setPrivateChannel:Z})(ne),le=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(h.a,{fixed:"left",inverted:!0,vertical:!0,style:{background:"#607d8b",fontSize:"1.2rem"}},c.a.createElement(D,{currentUser:this.props.authenticatedUser}),c.a.createElement("br",null),c.a.createElement(te,{authenticatedUser:this.props.authenticatedUser}),c.a.createElement(re,{key:this.props.authenticatedUser&&this.props.authenticatedUser.uid,user:this.props.authenticatedUser}))}}]),t}(o.Component),se=t(307),oe=t(598),ce=t(589),ie=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){var e=this.props,a=e.channelName,t=e.numUniqueUsers,n=e.handleSearch,r=e.searchLoading,l=e.privateChannel,s=e.userPhoto;return c.a.createElement(oe.a,{clearing:!0},c.a.createElement(E.a,{fluid:"true",as:"h2",floated:"left",style:{marginBottom:0}},c.a.createElement("span",null,s?c.a.createElement(y.a,{src:s,spaced:"right",style:{height:"2em"},avatar:!0}):"",a.toLowerCase(),!l&&c.a.createElement(v.a,{name:"star outline",color:"black"})),c.a.createElement(E.a.Subheader,null,parseInt(t.substring(0,1))>0?t:c.a.createElement(M.a,{size:10,disableShrink:!0}))),c.a.createElement(E.a,{floated:"right"},c.a.createElement(G.a,{loading:r,onChange:n,size:"mini",icon:"search",name:"searchTerm",placeholder:"Search Messages"})))}}]),t}(o.Component),ue=t(195),de=t.n(ue),me=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).state={file:null,authorized:["image/jpeg","image/png"]},e.addFile=function(a){var t=a.target.files[0];t&&e.setState({file:t})},e.sendFile=function(){var a=e.state.file,t=e.props,n=t.uploadFile,r=t.closeModal;null!==a&&(e.isAuthorized(a.name)&&(n(a,{contentType:de.a.lookup(a.name)}),r(),e.clearFile()))},e.isAuthorized=function(a){return e.state.authorized.includes(de.a.lookup(a))},e.clearFile=function(){return e.setState({file:null})},e}return Object(r.a)(t,[{key:"render",value:function(){var e=this.props,a=e.modal,t=e.closeModal;return c.a.createElement(x.a,{basic:!0,open:a,onClose:t},c.a.createElement(x.a.Header,null,"Select an Image File"),c.a.createElement(x.a.Content,null,c.a.createElement(G.a,{onChange:this.addFile,fluid:!0,label:"File types: jpg, png",name:"file",type:"file"})),c.a.createElement(x.a.Actions,null,c.a.createElement(f.a,{onClick:this.sendFile,color:"green",inverted:!0},c.a.createElement(v.a,{name:"checkmark"})," Send"),c.a.createElement(f.a,{color:"red",inverted:!0,onClick:t},c.a.createElement(v.a,{name:"remove"})," Cancel")))}}]),t}(o.Component),he=t(599),pe=t(583),fe=function(e){var a=e.uploadState,t=e.percentUploaded;return"uploading"===a&&c.a.createElement(pe.a,{className:"progress__bar",percent:t,progress:!0,indicating:!0,size:"small",inverted:!0})},ge=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).state={storageRef:U.storage().ref(),uploadState:"",uploadTask:null,message:"",loading:!1,channel:e.props.currentChannel,user:e.props.currentUser,messagesRef:e.props.messagesRef,privateChannel:e.props.privateChannel,errors:[],modal:!1,percentUploaded:0},e.openModal=function(){return e.setState({modal:!0})},e.closeModal=function(){return e.setState({modal:!1})},e.handleChange=function(a){e.setState(Object(F.a)({},a.target.name,a.target.value))},e.createMessage=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e.state.user,n={timestamp:U.database.ServerValue.TIMESTAMP,user:{id:t.uid,name:t.displayName,avatar:t.photoURL}};return null!==a?n.image=a:n.content=e.state.message,n},e.getPath=function(){return e.state.privateChannel?"chat/private-".concat(e.state.channel.id):"chat/public"},e.uploadFile=function(a,t){var n=e.state.channel.id,r=e.props.getMessagesRef(),l="".concat(e.getPath()).concat(Object(he.a)(),".jpeg");e.setState({uploadState:"uploading",uploadTask:e.state.storageRef.child(l).put(a,t)},(function(){e.state.uploadTask.on("state_changed",(function(a){var t=Math.round(a.bytesTransferred/a.totalBytes*100);e.setState({percentUploaded:t})}),(function(a){console.error(a),e.setState({errors:e.state.errors.concat(a),uploadState:"error",uploadTask:null})}),(function(){e.state.uploadTask.snapshot.ref.getDownloadURL().then((function(a){e.sendFileMessage(a,r,n)})).catch((function(a){console.error(a),e.setState({errors:e.state.errors.concat(a),uploadState:"error",uploadTask:null})}))}))}))},e.sendMessage=function(){var a=e.state,t=a.message,n=a.channel,r=e.props.getMessagesRef;t?(e.setState({loading:!0}),r().child(n.id).push().set(e.createMessage()).then((function(){e.setState({loading:!1,message:"",errors:[]})})).catch((function(a){console.error(a),e.setState({loading:!1,errors:e.state.errors.concat(a)})}))):e.setState({errors:e.state.errors.concat({message:"Add a message"})})},e.sendFileMessage=function(a,t,n){t.child(n).push().set(e.createMessage(a)).then((function(){e.setState({uploadState:"done"})})).catch((function(a){console.error(a),e.setState({errors:e.state.errors.concat(a)})}))},e}return Object(r.a)(t,[{key:"render",value:function(){var e,a=this.state,t=a.errors,n=a.message,r=a.loading,l=a.modal,s=a.uploadState,o=a.percentUploaded,i=a.user;return c.a.createElement(oe.a,{className:"message__form"},c.a.createElement(G.a,{fluid:!0,name:"message",style:{marginBottom:"0.7em"},label:c.a.createElement(f.a,{icon:"add"}),value:n,labelPosition:"left",placeholder:"Write your message",onChange:this.handleChange,className:t.some((function(e){return e.message.includes("message")}))?"error":""}),c.a.createElement(fe,{uploadState:s,percentUploaded:o}),(null===(e=i)?0:Object.keys(e).length)>0?c.a.createElement(f.a.Group,{icon:!0,widths:"2"},c.a.createElement(f.a,{color:"orange",content:"Add Reply",labelPosition:"left",icon:"edit",onClick:this.sendMessage,disabled:r}),c.a.createElement(f.a,{color:"teal",content:"Upload Media",labelPosition:"right",icon:"cloud upload",disabled:"uploading"===s,onClick:this.openModal})):c.a.createElement(W.a,{active:!0},c.a.createElement(B.a,{size:"small",content:"Please Wait loding chat..."})),c.a.createElement(me,{modal:l,closeModal:this.closeModal,uploadFile:this.uploadFile}))}}]),t}(o.Component),Ee=t(305),ve=t.n(Ee),be=function(e,a){return e.user.id===a.uid?"message__self":""},ye=function(e){var a,t=e.message,n=e.user;return c.a.createElement(ce.a,null,t.user.id===n.uid?c.a.createElement(o.Fragment,null):c.a.createElement(ce.a.Avatar,{src:t.user.avatar}),c.a.createElement(ce.a.Content,{className:be(t,n)},c.a.createElement(ce.a.Author,{as:"a"},t.user.id===n.userId?c.a.createElement(ce.a.Avatar,{src:t.user.avatar}):c.a.createElement(o.Fragment,null,t.user.name)),c.a.createElement(ce.a.Metadata,null,(a=t.timestamp,ve()(a).fromNow())),function(e){return e.hasOwnProperty("image")&&!e.hasOwnProperty("conetent")}(t)?c.a.createElement(y.a,{src:t.image,className:"message__image"}):c.a.createElement(ce.a.Text,null,t.content),c.a.createElement("br",null),c.a.createElement("br",null)))},Ce=Object(ee.b)((function(e){return{user:e.user}}))((function(e){var a=e.user,t=e.messages,n=a.authenticated;return c.a.createElement(W.a,{active:!0},n?c.a.createElement(o.Fragment,null,t.length>0?c.a.createElement(B.a,{size:"huge",content:"Preparing Chat..."}):c.a.createElement("h1",{className:"animated pulse"},"Add message")):c.a.createElement(B.a,{size:"huge",content:"Please Wait login in..."}))})),Se=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).state={privateChannel:e.props.isPrivateChannel,messagesRef:U.database().ref("messages"),privateMessagesRef:U.database().ref("privateMessages"),channel:e.props.currentChannel,currentUser:e.props.authenticatedUser,messages:[],loading:!0,numUniqueUsers:"",searchTerm:"",searchLoading:!1,searchResults:[]},e.getMessagesRef=function(){var a=e.state,t=a.messagesRef,n=a.privateMessagesRef;return a.privateChannel?n:t},e.addListeners=function(a){e.addMessageListener(a)},e.addMessageListener=function(a){var t=[];e.getMessagesRef().child(a).on("child_added",(function(a){t.push(a.val()),e.setState({messages:t,loading:!1})})),e.countUniqueUsers(t)},e.countUniqueUsers=function(a){var t=a.reduce((function(e,a){return e.includes(a.user.id)||e.push(a.user.id),e}),[]),n="".concat(t.length," user").concat(t.length>1?"s":"");e.setState({numUniqueUsers:n})},e.displayMessages=function(a){return a.length>0?a.map((function(a){return c.a.createElement(ye,{key:a.timestamp,message:a,user:e.state.currentUser})})):c.a.createElement(Ce,{messages:a})},e.displayChannelName=function(a){return a?"".concat(e.state.privateChannel?"@":"#").concat(a.name):""},e.getUserPhoto=function(e){return e&&e.photoURL?e.photoURL:""},e.handleSearch=function(a){e.setState({searchTerm:a.target.value,searchLoading:!0},(function(){e.handleSearchMessages()}))},e.handleSearchMessages=function(){var a=Object(se.a)(e.state.messages),t=new RegExp(e.state.searchTerm,"gi"),n=a.reduce((function(e,a){return(a.content&&a.content.match(t)||a.user.name.match(t))&&e.push(a),e}),[]);e.setState({searchResults:n}),setTimeout((function(){return e.setState({searchLoading:!1})}),1e3)},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.state,a=e.channel,t=e.currentUser;a&&t&&this.addListeners(a.id)}},{key:"render",value:function(){var e=this.state,a=e.messagesRef,t=e.channel,n=e.currentUser,r=e.messages,l=e.numUniqueUsers,s=e.searchTerm,i=e.searchResults,u=e.searchLoading,d=e.privateChannel;return c.a.createElement(o.Fragment,null,c.a.createElement(ie,{handleSearch:this.handleSearch,channelName:this.displayChannelName(t),numUniqueUsers:l,searchLoading:u,privateChannel:d,userPhoto:this.getUserPhoto(t)}),c.a.createElement(oe.a,null,c.a.createElement(ce.a.Group,{className:"messages"},s?this.displayMessages(i):this.displayMessages(r))),c.a.createElement(ge,{messagesRef:a,currentChannel:t,privateChannel:d,currentUser:n,getMessagesRef:this.getMessagesRef}))}}]),t}(o.Component),Oe=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,"Meta panel")}}]),t}(o.Component),Ue=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){var e=this.props,a=e.currentChannel,t=e.authenticatedUser,n=e.isPrivateChannel;return c.a.createElement(d.a,{container:!0,columns:"equal",className:"app"},c.a.createElement(g,null),c.a.createElement(le,{authenticatedUser:t,key:t&&t.uid}),c.a.createElement(d.a.Column,{style:{marginLeft:"15em",width:"30em"}},c.a.createElement(Se,{key:a&&a.id,currentChannel:a,authenticatedUser:t,isPrivateChannel:n})),c.a.createElement(d.a.Column,{style:{width:4}},c.a.createElement(Oe,null)))}}]),t}(o.Component),we=(t(518),Object(ee.b)((function(e){return{UI:e.UI,authenticatedUser:e.user.authenticatedUser,currentChannel:e.channel.currentChannel,isPrivateChannel:e.channel.isPrivateChannel}}))((function(e){var a=e.currentChannel,t=e.authenticatedUser,n=e.isPrivateChannel;return c.a.createElement(d.a,{container:!0},c.a.createElement(d.a.Column,null,c.a.createElement(Ue,{authenticatedUser:t,currentChannel:a,isPrivateChannel:n})))}))),je=t(31),ke=t(96),Ie=t(586),Re=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).handleLogin=function(a){a.preventDefault(),e.props.authenticateGoogle(e.props.history)},e}return Object(r.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){return c.a.createElement("button",{type:"button",className:"google-button",onClick:this.handleLogin},c.a.createElement("span",{className:"google-button__icon"},c.a.createElement("svg",{viewBox:"0 0 366 372",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M125.9 10.2c40.2-13.9 85.3-13.6 125.3 1.1 22.2 8.2 42.5 21 59.9 37.1-5.8 6.3-12.1 12.2-18.1 18.3l-34.2 34.2c-11.3-10.8-25.1-19-40.1-23.6-17.6-5.3-36.6-6.1-54.6-2.2-21 4.5-40.5 15.5-55.6 30.9-12.2 12.3-21.4 27.5-27 43.9-20.3-15.8-40.6-31.5-61-47.3 21.5-43 60.1-76.9 105.4-92.4z",id:"Shape",fill:"#EA4335"}),c.a.createElement("path",{d:"M20.6 102.4c20.3 15.8 40.6 31.5 61 47.3-8 23.3-8 49.2 0 72.4-20.3 15.8-40.6 31.6-60.9 47.3C1.9 232.7-3.8 189.6 4.4 149.2c3.3-16.2 8.7-32 16.2-46.8z",id:"Shape",fill:"#FBBC05"}),c.a.createElement("path",{d:"M361.7 151.1c5.8 32.7 4.5 66.8-4.7 98.8-8.5 29.3-24.6 56.5-47.1 77.2l-59.1-45.9c19.5-13.1 33.3-34.3 37.2-57.5H186.6c.1-24.2.1-48.4.1-72.6h175z",id:"Shape",fill:"#4285F4"}),c.a.createElement("path",{d:"M81.4 222.2c7.8 22.9 22.8 43.2 42.6 57.1 12.4 8.7 26.6 14.9 41.4 17.9 14.6 3 29.7 2.6 44.4.1 14.6-2.6 28.7-7.9 41-16.2l59.1 45.9c-21.3 19.7-48 33.1-76.2 39.6-31.2 7.1-64.2 7.3-95.2-1-24.6-6.5-47.7-18.2-67.6-34.1-20.9-16.6-38.3-38-50.4-62 20.3-15.7 40.6-31.5 60.9-47.3z",fill:"#34A853"}))),c.a.createElement("span",{className:"google-button__text"},"Google"))}}]),t}(o.Component),Ne={authenticateGoogle:function(){return function(e){e({type:"LOADING_UI"});var a=new U.auth.GoogleAuthProvider;e(K(a,["profile","email"]))}}},Ae=Object(ee.b)((function(e){return{user:e.user,UI:e.UI}}),Ne)(Re),Te=t(306),_e=t.n(Te),Pe=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).handleLogin=function(a){a.preventDefault(),e.props.authenticateGithub(e.props.history)},e}return Object(r.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){return c.a.createElement(L.a,{variant:"contained",color:"secondary",onClick:this.handleLogin},c.a.createElement(_e.a,null),c.a.createElement("span",null,"GitHub"))}}]),t}(o.Component),Le={authenticateGithub:function(){return function(e){e({type:"LOADING_UI"});var a=new U.auth.GithubAuthProvider;e(K(a,["repo"]))}}},Me=Object(ee.b)((function(e){return{user:e.user,UI:e.UI}}),Le)(Pe),De=t(585),Fe=t(584),xe=t(154),ze=t.n(xe),Ge={palette:{primary:{light:"#33c9dc",main:"#607d8b",dark:"#795548",contrastText:"#fff"},secondary:{light:"#ff6333",main:"#424242",dark:"#795548",contrastText:"#fff"}}},We=ze()(Ge),Be=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;return Object(n.a)(this,t),(e=a.call(this)).handleSubmit=function(a){a.preventDefault();var t={email:e.state.email,password:e.state.password};e.props.loginUser(t,e.props.history)},e.handleChange=function(a){e.setState(Object(F.a)({},a.target.name,a.target.value))},e.state={email:"",password:"",errors:{}},e}return Object(r.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props.UI.loading,a=this.state.errors;return c.a.createElement(Fe.a,{theme:We},c.a.createElement(d.a,{container:!0,columns:"3"},c.a.createElement(d.a.Column,null),c.a.createElement(d.a,{style:{marginTop:50,background:"#a5aba2",width:440}},c.a.createElement(d.a.Row,{style:{padding:"1.2em",margin:0},className:"animated rotateInDownRight delay-1s"},c.a.createElement(E.a,{inverted:!0,floated:"left",as:"h2",className:"animated pulse delay-3s",style:{marginBottom:40}},c.a.createElement("span",null," ",c.a.createElement(v.a,{name:"meetup",size:"huge"})),c.a.createElement(E.a.Content,null,"Meet-Friends ")),c.a.createElement("br",null),c.a.createElement(E.a,{inverted:!0,floated:"left",as:"h2",style:{color:"#615c1e"}},c.a.createElement(E.a.Content,{className:"animated slideInLeft"},a.message&&c.a.createElement(De.a,{variant:"body2"},a.message)," "))),c.a.createElement(d.a.Row,null,c.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit,className:"login"},c.a.createElement(Ie.a,{id:"email",name:"email",type:"email",label:"Email",value:this.state.email,onChange:this.handleChange,helperText:a.email,error:!!a.email,color:"primary",InputProps:{style:{color:"#fff"}},variant:"outlined",fullWidth:!0})," ",c.a.createElement("br",null),c.a.createElement(Ie.a,{id:"password",name:"password",type:"password",label:"Password",value:this.state.password,onChange:this.handleChange,helperText:a.password,error:!!a.password,color:"primary",InputProps:{style:{color:"#fff"}}})," ",c.a.createElement("br",null)," ",c.a.createElement("br",null),a.general&&c.a.createElement(De.a,{variant:"body2"},a.general),c.a.createElement(L.a,{type:"submit",variant:"contained",id:"button",color:"primary",disabled:e},"Login",e&&c.a.createElement(M.a,{size:30,disableShrink:!0})),c.a.createElement("br",null),c.a.createElement("small",{className:""}," ","Don't have an account ? ",c.a.createElement(ke.b,{to:"/signup"},"Signup Here")," "),c.a.createElement("br",null),c.a.createElement("span",null," ",c.a.createElement(v.a,{name:"meetup",size:"huge"})),c.a.createElement(Ae,null),c.a.createElement(Me,null))))))}}]),t}(o.Component),He=Object(ee.b)((function(e){return{user:e.user,UI:e.UI}}),{loginUser:function(e){return function(a){a({type:"LOADING_UI"}),V.a.post("/login",e).then((function(){a(J(e.email,e.password))})).catch((function(e){a({type:"SET_ERRORS",payload:e.response.data})}))}}})(Be),Ve=ze()(Ge),qe=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;return Object(n.a)(this,t),(e=a.call(this)).handleSubmit=function(a){a.preventDefault();var t={email:e.state.email,username:e.state.username,password:e.state.password,confirmPassword:e.state.confirmPassword};e.props.signupUser(t,e.props.history)},e.handleChange=function(a){e.setState(Object(F.a)({},a.target.name,a.target.value))},e.state={email:"",username:"",password:"",confirmPassword:"",errors:{}},e}return Object(r.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props.UI.loading,a=this.state.errors;return c.a.createElement(Fe.a,{theme:Ve},c.a.createElement(d.a,{container:!0,columns:"3"},c.a.createElement(d.a.Column,null),c.a.createElement(d.a,{style:{marginTop:50,background:"#a5aba2",width:440}},c.a.createElement(d.a.Row,{style:{padding:"1.2em",margin:0},className:"animated rotateInDownRight delay-1s"},c.a.createElement(E.a,{inverted:!0,floated:"left",as:"h2",className:"animated pulse delay-3s",style:{marginBottom:40}},c.a.createElement("span",null," ",c.a.createElement(v.a,{name:"meetup",size:"huge"})),c.a.createElement(E.a.Content,null,"Meet-Friends ")),c.a.createElement("br",null),c.a.createElement(E.a,{inverted:!0,floated:"left",as:"h2",style:{color:"#615c1e"}},c.a.createElement(E.a.Content,{className:"animated slideInLeft"},a.message&&c.a.createElement(De.a,{variant:"body2"},a.message)," "))),c.a.createElement(d.a.Row,null,c.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit,className:"login"},c.a.createElement(Ie.a,{id:"email",name:"email",type:"email",label:"Email",value:this.state.email,onChange:this.handleChange,helperText:a.email,error:!!a.email,color:"primary",InputProps:{style:{color:"#fff"}},variant:"outlined",fullWidth:!0})," ",c.a.createElement("br",null),c.a.createElement(Ie.a,{id:"username",name:"username",type:"username",label:"Username",value:this.state.username,onChange:this.handleChange,helperText:a.username,error:!!a.username,color:"primary",InputProps:{style:{color:"#fff"}},fullWidth:!0})," ",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(Ie.a,{id:"password",name:"password",type:"password",label:"Password",value:this.state.password,onChange:this.handleChange,helperText:a.password,error:!!a.password,color:"primary",InputProps:{style:{color:"#fff"}},variant:"outlined"})," ",c.a.createElement("br",null),c.a.createElement(Ie.a,{id:"confirmPassword",name:"confirmPassword",type:"confirmPassword",label:"Confirm Password",value:this.state.confirmPassword,onChange:this.handleChange,helperText:a.confirmPassword,error:!!a.confirmPassword,color:"primary",InputProps:{style:{color:"#fff"}}})," ",c.a.createElement("br",null)," ",c.a.createElement("br",null),a.general&&c.a.createElement(De.a,{variant:"body2"},a.general),c.a.createElement(L.a,{type:"submit",variant:"contained",id:"button",color:"primary",disabled:e},"Signup",e&&c.a.createElement(M.a,{size:30,disableShrink:!0})),c.a.createElement("br",null),c.a.createElement("small",{className:""},"Already have an account ? ",c.a.createElement(ke.b,{to:"/login"},"Login Here")," "),c.a.createElement("br",null),c.a.createElement("span",null," ",c.a.createElement(v.a,{name:"meetup",size:"huge"})),c.a.createElement(Ae,null),c.a.createElement(Me,null))))))}}]),t}(o.Component),Xe=Object(ee.b)((function(e){return{user:e.user,UI:e.UI}}),{signupUser:function(e){return function(a){a({type:"LOADING_UI"}),V.a.post("/signup",e).then((function(){a(J(e.email,e.password))})).catch((function(e){a({type:"SET_ERRORS",payload:e.response.data})}))}}})(qe),Je=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ke(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}V.a.defaults.baseURL="https://europe-west1-portfolio-alex-eb3ef.cloudfunctions.net/api";var Qe=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"setToken",value:function(e,a,t){e&&(V.a.defaults.headers.common.Authorization=e,this.props.setAuthenticatedUser(t))}},{key:"componentDidMount",value:function(){var e=this;U.auth().onAuthStateChanged((function(a){if(a){var t=a.xa,n=a.email,r="Bearer ".concat(t);e.setToken(r,n,a),P.dispatch({type:"STOP_LOADING_UI"}),e.props.history.push("/"),1e3*X()(t).exp<Date.now()&&(P.dispatch({type:"SET_UNAUTHENTICATED"}),e.props.history.push("/login"))}else e.props.history.push("/login")}))}},{key:"render",value:function(){return c.a.createElement(je.c,null,c.a.createElement(je.a,{exact:!0,path:"/",component:we}),c.a.createElement(je.a,{path:"/login",component:He}),c.a.createElement(je.a,{path:"/signup",component:Xe}))}}]),t}(o.Component),$e=Object(je.f)(Object(ee.b)((function(e){return{loading:e.UI.loading,channel:e.channel}}),{setAuthenticatedUser:function(e){return{type:"SET_AUTHENTICATED",payload:e}}})(Qe));u.a.render(c.a.createElement(ee.a,{store:P},c.a.createElement(ke.a,null,c.a.createElement($e,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("","/service-worker.js");Je?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ke(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ke(a,e)}))}}()}},[[327,1,2]]]);
//# sourceMappingURL=main.21fd04f7.chunk.js.map