(this["webpackJsonpmeet-friends"]=this["webpackJsonpmeet-friends"]||[]).push([[0],{363:function(e,t,a){e.exports=a(639)},598:function(e,t,a){},610:function(e,t,a){},639:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a(24),s=a(25),l=a(26),o=a(0),i=a.n(o),c=(a(365),a(27)),u=a.n(c),d=a(697),m=a(214),h=a.n(m),p=(a(369),a(371),a(640),{apiKey:"AIzaSyBlji1huTUq206tJcg0r7IAX76STFh-xns",authDomain:"portfolio-alex-eb3ef.firebaseapp.com",databaseURL:"https://portfolio-alex-eb3ef.firebaseio.com",projectId:"portfolio-alex-eb3ef",storageBucket:"portfolio-alex-eb3ef.appspot.com",messagingSenderId:"776158175345",appId:"1:776158175345:web:2140b8f94fedf1103bbbd0",measurementId:"G-5VBPTVC7PQ"});h.a.initializeApp(p);var f=h.a,g=a(32),v=a(96),E=a.n(v),y=a(169),C=a.n(y),b=function(e,t){return function(a,n){f.auth().signInWithEmailAndPassword(e,t).then((function(e){e&&a(U(e))})).catch((function(e){a({type:"SET_ERRORS",payload:e})}))}},S=function(e,t){return function(a){e.addScope("".concat(t[0])),t[1]&&e.addScope("".concat(t[1])),f.auth().signInWithPopup(e).then((function(e){if(e.credential){var t,n=e.user,r=n.displayName,s=n.email;t=n.xa;var l=C()(t),o=l.picture,i=l.user_id;a(O({email:s,username:r,profileImage:o},i)),a(U(e))}})).catch((function(e){a({type:"SET_ERRORS",payload:e})}))}},U=function(e){var t=f.auth().currentUser.uid,a=f.database().ref("users");f.database().ref("/users/"+t).once("value").then((function(n){return null!==n.val()?{type:"SET_ERRORS",payload:{email:"".concat(n.val().email," exists")}}:a.child(e.user.uid).set({email:e.user.email,username:e.user.displayName,profileImage:e.user.photoURL,coverImage:"https://firebasestorage.googleapis.com/v0/b/".concat(p.storageBucket,"/o/").concat("download.png","?alt=media"),userId:t})}))},O=function(e,t){return function(a){a({type:"LOADING_UI"}),E.a.post("/google/".concat(t),e).then((function(e){e.data})).catch((function(e){a({type:"SET_ERRORS",payload:e})}))}},w=function(e){return function(t){t({type:"SET_CURRENT_CHANNEL",payload:{currentChannel:e}})}},I=function(e){return{type:"SET_PRIVATE_CHANNEL",payload:{isPrivateChannel:e}}},R=a(672),k=a(694),N=a(642),A=a(686),j=a(696),T=a(133),L=a(75),_=a(216),M=a(675),P=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={modal:!1,loading:!1,primary:"",secondary:"",user:e.props.currentUser,usersRef:f.database().ref("users"),userColors:[]},e.addListener=function(t){var a=[];e.state.usersRef.child("".concat(t,"/colors")).on("child_added",(function(t){a.unshift(t.val()),e.setState({userColors:a})}))},e.handleChangePrimary=function(t){return e.setState({primary:t.hex})},e.handleChangeSecondary=function(t){return e.setState({secondary:t.hex})},e.handleSaveColors=function(){e.state.primary&&e.state.secondary&&e.saveColors(e.state.primary,e.state.secondary)},e.saveColors=function(t,a){e.setState({loading:!0},(function(){return e.state.usersRef.child("".concat(e.state.user.uid,"/colors")).push().update({primary:t,secondary:a}).then((function(){console.log("Colors added"),e.setState({loading:!1},(function(){return e.closeModal()}))})).catch((function(e){return console.error(e)}))}))},e.displayUserColors=function(t){return t.length>0&&t.map((function(t,a){return i.a.createElement(i.a.Fragment,{key:a},i.a.createElement(R.a,null),i.a.createElement("div",{className:"color__container",onClick:function(){return e.props.setColors(t.primary,t.secondary)}},i.a.createElement("div",{className:"color__square",style:{background:t.primary}},i.a.createElement("div",{className:"color__overlay",style:{background:t.secondary}}))))}))},e.openModal=function(){return e.setState({modal:!0})},e.closeModal=function(){return e.setState({modal:!1})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.state.user&&this.addListener(this.state.user.uid)}},{key:"render",value:function(){var e=this.state,t=e.modal,a=e.primary,n=e.secondary,r=e.userColors,s=e.loading;return i.a.createElement(k.a,{icon:"labeled",vertical:"true",visible:!0,width:"very thin"},i.a.createElement(R.a,null),i.a.createElement(N.a,{icon:"add",size:"small",color:"blue",onClick:this.openModal}),this.displayUserColors(r),i.a.createElement(A.a,{basic:!0,open:t,onClose:this.closeModal},i.a.createElement(A.a.Header,null,"Choose App Colors"),i.a.createElement(A.a.Content,null,i.a.createElement(j.a,{inverted:!0},i.a.createElement(T.a,{content:"Primary Color"}),i.a.createElement(_.SliderPicker,{color:a,onChange:this.handleChangePrimary})),i.a.createElement(j.a,{inverted:!0},i.a.createElement(T.a,{content:"Secondary Color"}),i.a.createElement(_.SliderPicker,{color:n,onChange:this.handleChangeSecondary}))),i.a.createElement(A.a.Actions,null,s?i.a.createElement(M.a,{size:50,disableShrink:!0}):i.a.createElement(o.Fragment,null,i.a.createElement(N.a,{color:"green",inverted:!0,onClick:this.handleSaveColors},i.a.createElement(L.a,{name:"checkmark"})," Save Colors"),i.a.createElement(N.a,{color:"red",inverted:!0,onClick:this.closeModal},i.a.createElement(L.a,{name:"remove"})," Cancel")))))}}]),a}(i.a.Component),x=Object(g.b)(null,{setColors:function(e,t){return{type:"SET_COLORS",payload:{primaryColor:e,secondaryColor:t}}}})(P),D=a(693),F=a(698),z=a(690),B=a(345),G=a(678),W=a(95),H=a(328),V=a(42),K={authenticated:!1,authenticatedUser:null,currentUser:null},q={currentChannel:null,isPrivateChannel:!1,userPost:null},X={primaryColor:"#193b4d",secondaryColor:"#19394d"},J={loading:!1,firstLoad:"none",errors:null},Q=[H.a],$=Object(W.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(V.a)({},e,{currentUser:t.payload});case"SET_AUTHENTICATED":return Object(V.a)({},e,{authenticated:!0,authenticatedUser:t.payload});case"SET_UNAUTHENTICATED":return Object(V.a)({},K);case"SET_GOOGLE_USER":return Object(V.a)({},e,{authenticated:!0},t.payload);default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_CHANNEL":return Object(V.a)({},e,{currentChannel:t.payload.currentChannel});case"SET_PRIVATE_CHANNEL":return Object(V.a)({},e,{isPrivateChannel:t.payload.isPrivateChannel});case"SET_USER_POST":return Object(V.a)({},e,{userPost:t.payload});default:return e}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERRORS":return Object(V.a)({},e,{loading:!1,errors:t.payload});case"CLEAR_ERRORS":return Object(V.a)({},e,{loading:!1,errors:null});case"LOADING_UI":return Object(V.a)({},e,{loading:!0});case"FIRST_LOAD":return Object(V.a)({},e,{firstLoad:t.payload});case"STOP_LOADING_UI":return Object(V.a)({},e,{loading:!1});default:return e}},colors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COLORS":return Object(V.a)({},e,{primaryColor:t.payload.primaryColor,secondaryColor:t.payload.secondaryColor});default:return e}}}),Y=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):W.d)(W.a.apply(void 0,Q)),Z=Object(W.e)($,{},Y),ee=a(329),te=a.n(ee),ae=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={user:e.props.currentUser,modal:!1,userRef:f.auth().currentUser,storageRef:f.storage().ref(),usersRef:f.database().ref("users"),croppedImage:"",previewImage:"",blob:null,uploadedCroppedImage:"",metadata:{contentType:"image/jpeg"}},e.openModal=function(){return e.setState({modal:!0})},e.closeModal=function(){return e.setState({modal:!1})},e.dropDownOptions=function(){return[{key:"user",text:i.a.createElement("span",{className:"animated fadeInDown delay-1s"},"Signed as"," ",i.a.createElement("strong",null,e.state.user?i.a.createElement(o.Fragment,null,e.state.user.displayName.toLowerCase()):i.a.createElement(o.Fragment,null))),disabled:!0},{key:"avatar",text:i.a.createElement("span",{className:"animated fadeInDown delay-0.5s",onClick:e.openModal},"Change Avatar")},{key:"signout",text:i.a.createElement("span",{className:"animated fadeInDown delay-0.5s"},i.a.createElement(N.a,{onClick:e.handleSignout,type:"submit",color:"teal"},i.a.createElement(L.a,{name:"blind"}),i.a.createElement("span",null,"SignOut")))}]},e.uploadCroppedImage=function(){var t=e.state,a=t.storageRef,n=t.userRef,r=t.blob,s=t.metadata;a.child("avatars/user-".concat(n.uid)).put(r,s).then((function(t){t.ref.getDownloadURL().then((function(t){e.setState({uploadedCroppedImage:t},(function(){return e.changeAvatar()}))}))}))},e.changeAvatar=function(){e.state.userRef.updateProfile({photoURL:e.state.uploadedCroppedImage}).then((function(){console.log("PhotoURL updated"),e.closeModal()})).catch((function(e){console.error(e)})),e.state.usersRef.child(e.state.user.uid).update({profileImage:e.state.uploadedCroppedImage}).then((function(){e.changeMessageAvatar(),console.log("User avatar updated")})).catch((function(e){console.error(e)}))},e.handleChange=function(t){var a=t.target.files[0],n=new FileReader;a&&(n.readAsDataURL(a),n.addEventListener("load",(function(){e.setState({previewImage:n.result})})))},e.handleCropImage=function(){e.avatarEditor&&e.avatarEditor.getImageScaledToCanvas().toBlob((function(t){var a=URL.createObjectURL(t);e.setState({croppedImage:a,blob:t})}))},e.handleSignout=function(){f.auth().signOut().then((function(){Z.dispatch({type:"SET_UNAUTHENTICATED"})}))},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.modal,r=t.previewImage,s=t.croppedImage;return i.a.createElement(d.a,null,i.a.createElement(d.a.Column,null,i.a.createElement(d.a.Row,{style:{padding:"1.2em",margin:0},className:"menu_item"},i.a.createElement(F.a,{inverted:!0,floated:"left",as:"h2",className:"animated fadeInDown delay-1s"},i.a.createElement(L.a,{name:"meetup"}),i.a.createElement(F.a.Content,{style:{fontSize:20}},"Meet-Friends"))),i.a.createElement(F.a,{style:{padding:"0.25em"},as:"h4",inverted:!0},i.a.createElement(z.a,{className:"dropdown",trigger:i.a.createElement(o.Fragment,null,a?i.a.createElement("span",null,i.a.createElement(B.a,{src:a.photoURL,spaced:"right",avatar:!0}),a.displayName):i.a.createElement(M.a,{size:20,disableShrink:!0})),options:this.dropDownOptions()})),i.a.createElement(A.a,{open:n,onClose:this.closeModal},i.a.createElement(A.a.Header,null,"Change Avatar"),i.a.createElement(A.a.Content,null,i.a.createElement(G.a,{onChange:this.handleChange,fluid:!0,icon:"user",type:"file",label:"New Avatar",name:"previewImage"}),i.a.createElement(d.a,{centered:!0,stackable:!0,columns:2},i.a.createElement(d.a.Row,{centered:!0},i.a.createElement(d.a.Column,{className:"ui center aligned grid"},r&&i.a.createElement(te.a,{ref:function(t){return e.avatarEditor=t},image:r,width:130,height:130,border:60,scale:1})),i.a.createElement(d.a.Column,null,s&&i.a.createElement(B.a,{style:{margin:"3.5em auto"},width:100,height:100,src:s}))))),i.a.createElement(A.a.Actions,null,s&&i.a.createElement(N.a,{color:"green",inverted:!0,onClick:this.uploadCroppedImage},i.a.createElement(L.a,{name:"save"})," Change Avatar"),i.a.createElement(N.a,{color:"green",inverted:!0,onClick:this.handleCropImage},i.a.createElement(L.a,{name:"image"})," Preview"),i.a.createElement(N.a,{color:"red",inverted:!0,onClick:this.closeModal},i.a.createElement(L.a,{name:"remove"})," Cancel")))))}}]),a}(o.Component),ne=(a(598),a(83)),re=a(56),se=a(685),le=a(695),oe=a(679),ie=a(699),ce=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={channel:null,channels:[],channelName:"",channelDetails:"",user:e.props.authenticatedUser,modal:!1,channelsRef:f.database().ref("channels"),firstLoad:!0,activeChannel:"",loading:!1,messagesRef:f.database().ref("messages"),notifications:[],typingRef:f.database().ref("typing")},e.removeListeners=function(){e.state.channelsRef.off()},e.closeModal=function(){e.setState({modal:!1})},e.openModal=function(){e.setState({modal:!0})},e.handleChange=function(t){t.preventDefault(),e.setState(Object(re.a)({},t.target.name,t.target.value))},e.addListeners=function(){var t=[];e.state.channelsRef.on("child_added",(function(a){t.push(a.val()),e.setState({channels:t},(function(){return e.setFirstChannel()})),e.addNotificationListener(a.key)}))},e.addNotificationListener=function(t){e.state.messagesRef.child(t).on("value",(function(a){e.state.channel&&e.handleNotifications(t,e.state.channel.id,e.state.notifications,a)}))},e.changeChannel=function(t){e.state.typingRef.child(t.id).child(e.state.user.uid).remove(),e.setActiveChannel(t),e.clearNotifications(),e.props.setCurrentChannel(t),e.props.setPrivateChannel(!1),e.setState({channel:t})},e.handleNotifications=function(t,a,n,r){var s=0,l=n.findIndex((function(e){return e.id===t}));-1!==l?(t!==a&&(s=n[l].total,r.numChildren()-s>0&&(n[l].count=r.numChildren()-s)),n[l].lastKnownTotal=r.numChildren()):n.push({id:t,total:r.numChildren(),lastKnownTotal:r.numChildren(),count:0}),e.setState({notifications:n})},e.setFirstChannel=function(){var t=e.state.channels[0];e.state.firstLoad&&e.state.channels.length>0&&(e.setActiveChannel(t),e.props.setCurrentChannel(t),e.setState({channel:t})),e.setState({firstLoad:!1})},e.setActiveChannel=function(t){e.setState({activeChannel:t.id})},e.addChannel=function(){var t=e.state,a=t.channelsRef,n=t.channelName,r=t.channelDetails,s=e.state.user,l=s.displayName,o=s.email,i=s.uid,c=s.photoURL,u=a.push().key,d={id:u,name:n,details:r,createdBy:{name:l,email:o,avatar:c,userId:i}};e.setState({loading:!0},(function(){return a.child(u).update(d).then((function(){e.setState({channelName:"",channelDetails:"",loading:!1}),e.closeModal(),console.log("Channel added")})).catch((function(e){console.error(e)}))}))},e.getNotificationCount=function(t){var a=0;if(e.state.notifications.forEach((function(e){e.id===t.id&&(a=e.count)})),a>0)return a},e.displayChannels=function(t){return t.length>0&&t.map((function(t){return i.a.createElement(D.a.Item,{key:t.id,onClick:function(){return e.changeChannel(t)},name:t.name,style:{opacity:.8,textAlign:"left"},active:t.id===e.state.activeChannel},e.getNotificationCount(t)&&i.a.createElement(T.a,{color:"red"},e.getNotificationCount(t)),"# ",t.name)}))},e.handleSubmit=function(t){t.preventDefault(),e.isformValid(e.state)&&e.addChannel()},e.isformValid=function(e){var t=e.channelName,a=e.channelDetails;return t&&a},e.clearNotifications=function(){var t=e.state.notifications.findIndex((function(t){return t.id===e.state.channel.id}));if(-1!==t){var a=Object(ne.a)(e.state.notifications);a[t].total=e.state.notifications[t].lastKnownTotal,a[t].count=0,e.setState({notifications:a})}},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"UNSAFE_componentWillMount",value:function(){this.removeListeners()}},{key:"render",value:function(){var e=this.state,t=e.modal,a=e.channels,n=e.loading;return i.a.createElement(o.Fragment,null,i.a.createElement(D.a.Menu,{className:"animated fadeInDown menu_item2"},i.a.createElement(D.a.Item,{style:{textAlign:"left"}},i.a.createElement("span",null,i.a.createElement(L.a,{name:"exchange"})," CHANNELS"," ")," ","(",a.length,")"," ",i.a.createElement(L.a,{name:"add",className:"add",onClick:this.openModal})),i.a.createElement(ie.a,{style:{height:"18vh",overflow:"auto"}},this.displayChannels(a))),i.a.createElement(A.a,{basic:!0,open:t,onClose:this.closeModal},this.props.authenticatedUser?i.a.createElement(o.Fragment,null,i.a.createElement(A.a.Header,null,"Add a Channel "),i.a.createElement(A.a.Content,null,i.a.createElement(se.a,{onSubmit:this.handleSubmit},i.a.createElement(se.a.Field,{className:"form-control",style:{backGroundColor:"#607d8b"}},i.a.createElement(G.a,{type:"text",icon:"tags icon",className:"ui right labeled left icon input",fluid:!0,placeholder:"Name of channel",name:"channelName",onChange:this.handleChange})),i.a.createElement(se.a.Field,{className:"form-control"},i.a.createElement(G.a,{type:"text",icon:"tags icon",className:"ui right labeled left icon input",fluid:!0,placeholder:"About the channel",name:"channelDetails",onChange:this.handleChange})))),i.a.createElement(A.a.Actions,null,n?i.a.createElement(M.a,{size:50,disableShrink:!0}):i.a.createElement(o.Fragment,null,i.a.createElement(N.a,{inverted:!0,color:"green",onClick:this.handleSubmit},i.a.createElement(L.a,{name:"checkmark"})," Add"),i.a.createElement(N.a,{inverted:!0,color:"red",onClick:this.closeModal},i.a.createElement(L.a,{name:"remove"})," Cancel")))):i.a.createElement(le.a,{active:!0},i.a.createElement(oe.a,{size:"huge",content:"Please Wait authenticating..."}))))}}]),a}(o.Component),ue=Object(g.b)(null,{setCurrentChannel:w,setPrivateChannel:I})(ce),de=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={activeChannel:"",user:e.props.user,users:[],userMessage:null,userRef:f.database().ref("users"),connectedRef:f.database().ref(".info/connected"),presenceRef:f.database().ref("presence"),privateMessagesRef:f.database().ref("privateMessages"),notifications:[],firstLoad:!0,display:"none",closeMessage:"inline"},e.addListeners=function(t){var a=e.state,n=a.userRef,r=a.connectedRef,s=a.presenceRef,l=[];n.on("child_added",(function(t){var a=t.val();a.uid=t.key,a.status="offline",e.state.user&&e.state.user.uid!==a.userId&&(l.push(a),e.addNotificationListener(a.uid)),e.setState({users:l},(function(){return e.setFirstUser()}))})),r.on("value",(function(e){if(!0===e.val()){var a=s.child(t);a.set(!0),a.onDisconnect().remove((function(e){null!==e&&console.error(e)}))}})),s.on("child_added",(function(a){t!==a.key&&e.addStatusToUser(a.key)})),s.on("child_removed",(function(a){t!==a.key&&e.addStatusToUser(a.key,!1)}))},e.setFirstUser=function(){var t=e.state.users[0];e.state.firstLoad&&e.state.users.length>0&&(e.setActiveChannel(t),e.setState({userMessage:t})),e.setState({firstLoad:!1})},e.setActiveChannel=function(t){e.setState({activeChannel:t.uid})},e.addNotificationListener=function(t){e.state.privateMessagesRef.child(t).child(e.state.user.uid).on("value",(function(a){console.log(a.key),e.handleNotifications(t,e.state.user.uid,e.state.notifications,a)})),e.state.privateMessagesRef.child(e.state.user.uid).child(t).on("value",(function(a){e.handleNotifications(t,e.state.user.uid,e.state.notifications,a)}))},e.handleNotifications=function(t,a,n,r){var s=0,l=n.findIndex((function(e){return e.id===t}));-1!==l?(t!==a&&(s=n[l].total,r.numChildren()-s>0&&(n[l].count=r.numChildren()-s)),n[l].lastKnownTotal=r.numChildren()):n.push({id:t,total:r.numChildren(),lastKnownTotal:r.numChildren(),count:0}),e.setState({notifications:n})},e.addStatusToUser=function(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.state.users.reduce((function(e,n){return n.uid===t&&(n.status="".concat(a?"online":"offline")),e.concat(n)}),[]);e.setState({users:n})},e.getChannelId=function(t){var a=e.state.user.uid;return t<a?"".concat(t,"/").concat(a):"".concat(a,"/").concat(t)},e.isUserOnline=function(e){return"online"===e.status},e.changeChannel=function(t){var a={id:e.getChannelId(t.userId),name:t.username,photoURL:t.profileImage};e.props.setCurrentChannel(a),e.props.setPrivateChannel(!0),e.props.firstLoad(),e.setActiveChannel(t),e.setState({userMessage:t}),e.clearNotifications()},e.getNotificationCount=function(t){var a=0;if(e.state.notifications.forEach((function(n){n.id===t.userId&&n.id!==e.state.userMessage.uid&&(a=n.count)})),a>0)return a},e.clearNotifications=function(){var t=e.state.notifications.findIndex((function(t){return t.id===e.state.userMessage.uid}));if(-1!==t){var a=Object(ne.a)(e.state.notifications);a[t].total=e.state.notifications[t].lastKnownTotal,a[t].count=0,e.setState({notifications:a})}},e.handleDisplay=function(){e.setState({display:"inline",closeMessage:"none"},(function(){return e.props.handleDisplayActiveUsers()}))},e.handleCloseDisplay=function(){e.setState({display:"none",closeMessage:"inline"},(function(){return e.props.closeActiveUsers()}))},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.state.user&&this.addListeners(this.state.user.uid)}},{key:"componentWillMount",value:function(){this.state.userRef.off(),this.state.privateMessagesRef.off()}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.activeChannel,r=t.userMessage;return i.a.createElement(D.a.Menu,{className:"menu_item_direct"},i.a.createElement(D.a.Item,null,i.a.createElement(ie.a,{display:this.state.closeMessage},i.a.createElement(N.a,{onClick:this.handleDisplay},i.a.createElement("span",null,i.a.createElement(L.a,{name:"mail"}),"DIRECT ",i.a.createElement("br",null),"MESSAGES")," ","(",a.length,")"))),i.a.createElement(D.a.Item,{style:{textAlign:"left"}},i.a.createElement(ie.a,{display:this.state.display},i.a.createElement(N.a,{onClick:this.handleCloseDisplay},i.a.createElement("span",null,i.a.createElement(L.a,{name:"exchange"})," CHANNELS")," "))),a.map((function(t){return i.a.createElement(ie.a,{display:e.state.display,style:{opacity:.8,fontStyle:"italic",textAlign:"left"},key:t.userId},i.a.createElement(D.a.Item,{className:"animated fadeInUp",active:t.userId===n,onClick:function(){return e.changeChannel(t)}},i.a.createElement(L.a,{name:"circle",color:e.isUserOnline(t)?"green":"red"}),i.a.createElement("span",null," ",i.a.createElement(B.a,{src:t.profileImage,spaced:"right",avatar:!0})),r&&e.getNotificationCount(t)&&i.a.createElement(T.a,{color:"red"},e.getNotificationCount(t)),t.username.toLowerCase()))})))}}]),a}(o.Component),me=Object(g.b)(null,{setCurrentChannel:w,setPrivateChannel:I,firstLoad:function(){return{type:"FIRST_LOAD",payload:"inline"}}})(de),he=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={userRef:f.database().ref("users"),user:e.props.currentUser,activeChannel:"",starredChannels:[]},e.addListeners=function(t){e.state.userRef.child(t).child("starred").on("child_added",(function(t){var a=Object(V.a)({id:t.key},t.val());e.setState({starredChannels:[].concat(Object(ne.a)(e.state.starredChannels),[a])})})),e.state.userRef.child(t).child("starred").on("child_removed",(function(t){var a=Object(V.a)({id:t.key},t.val()),n=e.state.starredChannels.filter((function(e){return e.id!==a.id}));e.setState({starredChannels:n})}))},e.displayChannels=function(t){return t.length>0&&t.map((function(t){return i.a.createElement(D.a.Item,{key:t.id,onClick:function(){return e.changeChannel(t)},name:t.name,style:{opacity:.8,textAlign:"left"},active:t.id===e.state.activeChannel,className:"animated fadeInDown delay-0.5s"},"# ",t.name)}))},e.setActiveChannel=function(t){e.setState({activeChannel:t.id})},e.changeChannel=function(t){e.setActiveChannel(t),e.props.setCurrentChannel(t),e.props.setPrivateChannel(!1)},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.state.user&&this.addListeners(this.state.user.uid)}},{key:"render",value:function(){var e=this.state.starredChannels;return i.a.createElement(D.a.Menu,{className:"menu_item2"},i.a.createElement(D.a.Item,{style:{textAlign:"left"}},i.a.createElement("span",null,i.a.createElement(L.a,{name:"star"})," STARRED"," ")," ","(",e.length,")"," "),this.displayChannels(e))}}]),a}(o.Component),pe=Object(g.b)(null,{setCurrentChannel:w,setPrivateChannel:I})(he),fe=a(692),ge=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={display:"none",closeMessage:"inline",activeIndex:0},e.handleDisplay=function(){e.setState({display:"inline",closeMessage:"none"})},e.handleCloseDisplay=function(){e.setState({display:"none",closeMessage:"inline"})},e.setActiveIndex=function(t,a){var n=a.index,r=e.state.activeIndex===n?-1:n;e.setState({activeIndex:r})},e}return Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement(j.a,{style:{bottom:"2em",cursor:"pointer"}},i.a.createElement(ie.a,{display:this.state.closeMessage},i.a.createElement(F.a,{as:"h3",attached:"top",className:"animated fadeInLeft delay-1s",onClick:this.handleDisplay},"About ",i.a.createElement("br",null),"..@","Developer")),i.a.createElement(ie.a,{display:this.state.display},i.a.createElement(fe.a,null,i.a.createElement(fe.a.Title,{active:0===this.state.activeIndex,index:0,onClick:this.setActiveIndex},i.a.createElement(L.a,{name:"dropdown"}),i.a.createElement(L.a,{name:"user"}),i.a.createElement("a",{href:"http://portfolio-alex-eb3ef.firebaseapp.com/"},"Portfoilio")),i.a.createElement(fe.a.Title,{active:0===this.state.activeIndex,index:0,className:"animated fadeInUp"},i.a.createElement(L.a,{name:"dropdown"}),i.a.createElement(L.a,{name:"github"}),i.a.createElement("a",{href:"https://github.com/alexmwaura/"},"Github")),i.a.createElement(N.a,{onClick:this.handleCloseDisplay,color:"youtube"},i.a.createElement(L.a,{name:"close",size:"small"})," close"))))}}]),a}(i.a.Component),ve=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={displayActiveUsers:"inline"},e.handleDisplayActiveUsers=function(){e.setState({displayActiveUsers:"none"})},e.closeActiveUsers=function(){e.setState({displayActiveUsers:"inline"})},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state.displayActiveUsers;return i.a.createElement(D.a,{inverted:!0,className:"ui sidebar inverted vertical menu sidebar-menu",fixed:"left",vertical:!0,size:"small",style:{background:"".concat(this.props.userColors.secondaryColor),fontSize:"1.2rem",height:"100vh",overFlow:"scroll"}},i.a.createElement(ae,{currentUser:this.props.authenticatedUser}),i.a.createElement("br",null),i.a.createElement(pe,{currentUser:this.props.authenticatedUser}),i.a.createElement(me,{handleDisplayActiveUsers:this.handleDisplayActiveUsers,user:this.props.authenticatedUser,closeActiveUsers:this.closeActiveUsers}),i.a.createElement(ie.a,{display:e},i.a.createElement(ue,{authenticatedUser:this.props.authenticatedUser}),i.a.createElement(ge,null)))}}]),a}(o.Component),Ee=a(687),ye=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.channelName,a=e.numUniqueUsers,n=e.handleSearch,r=e.searchLoading,s=e.privateChannel,l=e.userPhoto,o=e.handleStar,c=e.isChannelStarred;return i.a.createElement(j.a,{clearing:!0},i.a.createElement(F.a,{fluid:"true",as:"h2",floated:"left",style:{marginBottom:0}},i.a.createElement("span",null,l?i.a.createElement(B.a,{src:l,spaced:"right",style:{height:"2em"},avatar:!0}):"",t.toLowerCase(),!s&&i.a.createElement(L.a,{name:c?"star":"star outline",color:c?"yellow":"black",onClick:o})),i.a.createElement(F.a.Subheader,null,!s&&a)),i.a.createElement(F.a,{floated:"right"},i.a.createElement(G.a,{loading:r,onChange:n,size:"mini",icon:"search",name:"searchTerm",placeholder:"Search Messages"})))}}]),a}(o.Component),Ce=a(219),be=a.n(Ce),Se=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={file:null,authorized:["image/jpeg","image/png"]},e.addFile=function(t){var a=t.target.files[0];a&&e.setState({file:a})},e.sendFile=function(){var t=e.state.file,a=e.props,n=a.uploadFile,r=a.closeModal;null!==t&&(e.isAuthorized(t.name)&&(n(t,{contentType:be.a.lookup(t.name)}),r(),e.clearFile()))},e.isAuthorized=function(t){return e.state.authorized.includes(be.a.lookup(t))},e.clearFile=function(){return e.setState({file:null})},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.modal,a=e.closeModal;return i.a.createElement(A.a,{basic:!0,open:t,onClose:a},i.a.createElement(A.a.Header,null,"Select an Image File"),i.a.createElement(A.a.Content,null,i.a.createElement(G.a,{onChange:this.addFile,fluid:!0,label:"File types: jpg, png",name:"file",type:"file"})),i.a.createElement(A.a.Actions,null,i.a.createElement(N.a,{onClick:this.sendFile,color:"green",inverted:!0},i.a.createElement(L.a,{name:"checkmark"})," Send"),i.a.createElement(N.a,{color:"red",inverted:!0,onClick:a},i.a.createElement(L.a,{name:"remove"})," Cancel")))}}]),a}(o.Component),Ue=a(700),Oe=a(680),we=function(e){var t=e.uploadState,a=e.percentUploaded;return"uploading"===t&&i.a.createElement(Oe.a,{className:"progress__bar",percent:a,progress:!0,indicating:!0,size:"small",inverted:!0})},Ie=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={storageRef:f.storage().ref(),uploadState:"",uploadTask:null,message:"",loading:!1,channel:e.props.currentChannel,user:e.props.currentUser,messagesRef:e.props.messagesRef,privateChannel:e.props.privateChannel,errors:[],modal:!1,percentUploaded:0,typingRef:f.database().ref("typing")},e.openModal=function(){return e.setState({modal:!0})},e.closeModal=function(){return e.setState({modal:!1})},e.handleChange=function(t){e.setState(Object(re.a)({},t.target.name,t.target.value))},e.createMessage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=e.state.user,n={timestamp:f.database.ServerValue.TIMESTAMP,user:{id:a.uid,name:a.displayName,avatar:a.photoURL}};return null!==t?n.image=t:n.content=e.state.message,n},e.getPath=function(){return e.state.privateChannel?"chat/private-".concat(e.state.channel.id):"chat/public"},e.uploadFile=function(t,a){var n=e.state.channel.id,r=e.props.getMessagesRef(),s="".concat(e.getPath()).concat(Object(Ue.a)(),".jpeg");e.setState({uploadState:"uploading",uploadTask:e.state.storageRef.child(s).put(t,a)},(function(){e.state.uploadTask.on("state_changed",(function(t){var a=Math.round(t.bytesTransferred/t.totalBytes*100);e.setState({percentUploaded:a})}),(function(t){console.error(t),e.setState({errors:e.state.errors.concat(t),uploadState:"error",uploadTask:null})}),(function(){e.state.uploadTask.snapshot.ref.getDownloadURL().then((function(t){e.sendFileMessage(t,r,n)})).catch((function(t){console.error(t),e.setState({errors:e.state.errors.concat(t),uploadState:"error",uploadTask:null})}))}))}))},e.handleKeyDown=function(){var t=e.state,a=t.message,n=t.typingRef,r=t.channel,s=t.user;a?n.child(r.id).child(s.uid).set({displayName:s.displayName,photoURL:s.photoURL}):n.child(r.id).child(s.uid).remove()},e.sendMessage=function(){var t=e.state,a=t.message,n=t.channel,r=t.typingRef,s=t.user,l=e.props.getMessagesRef;a?(e.setState({loading:!0}),l().child(n.id).push().set(e.createMessage()).then((function(){r.child(n.id).child(s.uid).remove(),e.setState({loading:!1,message:"",errors:[]})})).catch((function(t){console.error(t),e.setState({loading:!1,errors:e.state.errors.concat(t)})}))):e.setState({errors:e.state.errors.concat({message:"Add a message"})})},e.sendFileMessage=function(t,a,n){a.child(n).push().set(e.createMessage(t)).then((function(){e.setState({uploadState:"done"})})).catch((function(t){console.error(t),e.setState({errors:e.state.errors.concat(t)})}))},e}return Object(r.a)(a,[{key:"render",value:function(){var e,t=this.state,a=t.errors,n=t.message,r=t.loading,s=t.modal,l=t.uploadState,o=t.percentUploaded,c=t.user;return i.a.createElement(j.a,{className:"message__form"},i.a.createElement(G.a,{fluid:!0,name:"message",onKeyDown:this.handleKeyDown,style:{marginBottom:"0.7em"},label:i.a.createElement(N.a,{icon:"add"}),value:n,labelPosition:"left",placeholder:"Write your message",onChange:this.handleChange,className:a.some((function(e){return e.message.includes("message")}))?"error":""}),i.a.createElement(we,{uploadState:l,percentUploaded:o}),(null===(e=c)?0:Object.keys(e).length)>0?i.a.createElement(N.a.Group,{icon:!0,widths:"2"},i.a.createElement(N.a,{color:"orange",content:"Add Reply",labelPosition:"left",icon:"edit",onClick:this.sendMessage,disabled:r}),i.a.createElement(N.a,{color:"teal",content:"Upload Media",labelPosition:"right",icon:"cloud upload",disabled:"uploading"===l,onClick:this.openModal})):i.a.createElement(le.a,{active:!0},i.a.createElement(oe.a,{size:"small",content:"Please Wait loading chat..."})),i.a.createElement(Se,{modal:s,closeModal:this.closeModal,uploadFile:this.uploadFile}))}}]),a}(o.Component),Re=a(341),ke=a.n(Re),Ne=function(e,t){return e.user.id===t.uid?"message__self":"message_others"},Ae=function(e,t){return e.user.id===t.uid?"message__selfTwo":"message_others_two"},je=function(e){var t,a=e.message,n=e.user;return i.a.createElement(Ee.a,null,i.a.createElement(Ee.a.Content,{className:Ne(a,n)},a.user.id===n.uid?i.a.createElement(o.Fragment,null):i.a.createElement(Ee.a.Avatar,{src:a.user.avatar}),i.a.createElement(Ee.a.Content,null,i.a.createElement("br",null),i.a.createElement(Ee.a.Author,{as:"a"},a.user.id===n.userId?i.a.createElement(Ee.a.Avatar,{src:a.user.avatar}):i.a.createElement(o.Fragment,null,a.user.name)),i.a.createElement(Ee.a.Metadata,null,(t=a.timestamp,ke()(t).fromNow())),function(e){return e.hasOwnProperty("image")&&!e.hasOwnProperty("conetent")}(a)?i.a.createElement(B.a,{src:a.image,className:"message__image"}):i.a.createElement(Ee.a.Text,{style:{textAlign:"center",width:"fit-content",marginTop:"1em"}},i.a.createElement(ie.a,null,i.a.createElement("h1",{className:Ae(a,n),style:{fontSize:"medium"}}," ",a.content))),i.a.createElement("br",null),i.a.createElement("br",null))))},Te=Object(g.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,a=e.messages,n=t.authenticated;return i.a.createElement(j.a,null,n?i.a.createElement(o.Fragment,null,a.length>0?i.a.createElement(le.a,{active:!0},i.a.createElement(oe.a,{size:"huge",content:"Preparing Chat..."})):i.a.createElement(ie.a,{className:"animated pulse"},i.a.createElement(F.a,{as:"h1",style:{backgroundColor:"#fff",color:"#000",textAlign:"center",height:"54vh",fontFamily:"italic",fontSize:"xx-large"}},"Add Message"))):i.a.createElement(oe.a,{size:"huge",content:"Please Wait login in..."}))})),Le=function(){return i.a.createElement("div",{className:"typing"},i.a.createElement("div",{className:"typing__dot"}),i.a.createElement("div",{className:"typing__dot"}),i.a.createElement("div",{className:"typing__dot"}))},_e=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={privateChannel:e.props.isPrivateChannel,usersRef:f.database().ref("users"),messagesRef:f.database().ref("messages"),privateMessagesRef:f.database().ref("privateMessages"),channel:e.props.currentChannel,currentUser:e.props.authenticatedUser,typingRef:f.database().ref("typing"),messages:[],loading:!0,numUniqueUsers:"",searchTerm:"",searchLoading:!1,searchResults:[],isChannelStarred:!1,typingUsers:[],connectedRef:f.database().ref(".info/connected")},e.getMessagesRef=function(){var t=e.state,a=t.messagesRef,n=t.privateMessagesRef;return t.privateChannel?n:a},e.addListeners=function(t){e.addMessageListener(t),e.addTypingListeners(t)},e.addUserStarsListener=function(t,a){e.state.usersRef.child(a).child("starred").once("value").then((function(a){if(null!==a.val()){var n=Object.keys(a.val()).includes(t);e.setState({isChannelStarred:n})}}))},e.addMessageListener=function(t){var a=[];e.getMessagesRef().child(t).on("child_added",(function(t){a.push(t.val()),e.setState({messages:a,loading:!1})})),e.countUniqueUsers(a),e.countUserPosts(a)},e.countUniqueUsers=function(t){var a=t.reduce((function(e,t){return e.includes(t.user.id)||e.push(t.user.id),e}),[]),n="".concat(a.length," user").concat(a.length>1?"s":"");e.setState({numUniqueUsers:n})},e.countUserPosts=function(t){var a=t.reduce((function(e,t){return t.user.name in e?e[t.user.name].count+=1:e[t.user.name]={avatar:t.user.avatar,count:1},e}),{});e.props.setUserPosts(a)},e.displayMessages=function(t){return t.length>0?t.map((function(t){return i.a.createElement(je,{key:t.timestamp,message:t,user:e.state.currentUser})})):i.a.createElement(Te,{messages:t})},e.displayChannelName=function(t){return t?"".concat(e.state.privateChannel?"@":"#").concat(t.name):""},e.getUserPhoto=function(e){return e&&e.photoURL?e.photoURL:""},e.handleSearch=function(t){e.setState({searchTerm:t.target.value,searchLoading:!0},(function(){e.handleSearchMessages()}))},e.handleSearchMessages=function(){var t=Object(ne.a)(e.state.messages),a=new RegExp(e.state.searchTerm,"gi"),n=t.reduce((function(e,t){return(t.content&&t.content.match(a)||t.user.name.match(a))&&e.push(t),e}),[]);e.setState({searchResults:n}),setTimeout((function(){return e.setState({searchLoading:!1})}),1e3)},e.handleStar=function(){e.setState((function(e){return{isChannelStarred:!e.isChannelStarred}}),(function(){return e.starChannel()}))},e.starChannel=function(){e.state.isChannelStarred?e.state.usersRef.child("".concat(e.state.currentUser.uid,"/starred")).update(Object(re.a)({},e.state.channel.id,{name:e.state.channel.name,details:e.state.channel.details,createdBy:{name:e.state.channel.createdBy.name,avatar:e.state.channel.createdBy.avatar}})):e.state.usersRef.child("".concat(e.state.currentUser.uid,"/starred")).child(e.state.channel.id).remove((function(e){null!==e&&console.error(e)}))},e.addTypingListeners=function(t){var a=[];e.state.typingRef.child(t).on("child_added",(function(t){t.key!==e.state.currentUser.uid&&(a=a.concat({id:t.key,name:t.val().displayName,avatar:t.val().photoURL}),e.setState({typingUsers:a}))})),e.state.typingRef.child(t).on("child_removed",(function(t){-1!==a.findIndex((function(e){return e.id===t.key}))&&(a=a.filter((function(e){return e.id!==t.key})),e.setState({typingUsers:a}))})),e.state.connectedRef.on("value",(function(a){!0===a.val()&&e.state.typingRef.child(t).child(e.state.currentUser.uid).onDisconnect().remove((function(e){null!==e&&console.error(e)}))}))},e.displayTypingUsers=function(e){return e.length>0&&e.map((function(e){return i.a.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.2em"},key:e.id},i.a.createElement("span",{className:"user__typing"}," ",i.a.createElement(B.a,{avatar:!0,src:e.avatar})," ",e.name," ")," ",i.a.createElement(Le,null))}))},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.channel,a=e.currentUser;t&&a&&(this.addListeners(t.id),this.addUserStarsListener(t.id,a.uid))}},{key:"componentWillMount",value:function(){this.state.privateMessagesRef.off()}},{key:"render",value:function(){var e=this.state,t=e.messagesRef,a=e.channel,n=e.currentUser,r=e.messages,s=e.numUniqueUsers,l=e.searchTerm,o=e.searchResults,c=e.searchLoading,u=e.privateChannel,d=e.typingUsers,m=e.isChannelStarred;return i.a.createElement(j.a,{style:{width:"50em",background:this.props.userColors.primaryColor,border:"none"}},i.a.createElement(ye,{handleSearch:this.handleSearch,channelName:this.displayChannelName(a),numUniqueUsers:s,searchLoading:c,privateChannel:u,userPhoto:this.getUserPhoto(a),handleStar:this.handleStar,isChannelStarred:m}),i.a.createElement(j.a,null,i.a.createElement(Ee.a.Group,{className:"messages"},l?this.displayMessages(o):this.displayMessages(r),this.displayTypingUsers(d))),i.a.createElement(Ie,{messagesRef:t,currentChannel:a,privateChannel:u,currentUser:n,getMessagesRef:this.getMessagesRef}))}}]),a}(o.Component),Me=Object(g.b)(null,{setUserPosts:function(e){return{type:"SET_USER_POST",payload:e}}})(_e),Pe=a(344),xe=a(691),De=a(681),Fe=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={channel:e.props.currentChannel,activeIndex:0,privateChannel:e.props.isPrivateChannel,firstLoad:e.props.firstLoad},e.setActiveIndex=function(t,a){var n=a.index,r=e.state.activeIndex===n?-1:n;e.setState({activeIndex:r})},e.displayTopPosters=function(e){return Object.entries(e).sort((function(e,t){return t[1]-e[1]})).map((function(e,t){var a=Object(Pe.a)(e,2),n=a[0],r=a[1];return i.a.createElement(xe.a.Item,{key:t,className:"animated fadeInUp"},i.a.createElement(B.a,{src:r.avatar,avatar:!0}),i.a.createElement(xe.a.Content,null,i.a.createElement(xe.a.Header,{as:"a"},n.toLocaleLowerCase()),i.a.createElement(xe.a.Description,null,r.count," post",r.count>1?"s":"")))})).slice(0,5).reverse()},e.displayUserInformation=function(t){return t&&t.photoURL?i.a.createElement(j.a,null,i.a.createElement(F.a,{as:"h3",attached:"top",className:"animated fadeInLeft delay-1s"},"About","...  @",t.name),i.a.createElement(fe.a,null,i.a.createElement(fe.a.Title,{active:0===e.state.activeIndex,index:0,onClick:e.setActiveIndex},i.a.createElement(L.a,{name:"dropdown"}),i.a.createElement(L.a,{name:"user"}),t.name," Profile"),i.a.createElement(fe.a.Content,{active:0===e.state.activeIndex,className:"animated fadeInUp"},i.a.createElement(B.a,{src:t.photoURL})))):""},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.activeIndex,n=t.privateChannel,r=t.channel,s=this.props.userPost;return n||!r?i.a.createElement(ie.a,{display:this.props.firstLoad},(function(){return e.displayUserInformation(r)})):i.a.createElement(j.a,null,i.a.createElement(F.a,{as:"h3",attached:"top",className:"animated fadeInLeft delay-1s"},"About","...  #",r.name),i.a.createElement(fe.a,{styled:!0,attached:"true"},i.a.createElement(fe.a.Title,{active:2===a,index:2,onClick:this.setActiveIndex},i.a.createElement(L.a,{name:"dropdown"}),i.a.createElement(L.a,{name:"info"}),"Channel Details"),i.a.createElement(fe.a.Content,{active:2===a,className:"animated fadeInUp"},r.details),i.a.createElement(fe.a.Title,{active:1===a,index:1,onClick:this.setActiveIndex},i.a.createElement(L.a,{name:"dropdown"}),i.a.createElement(L.a,{name:"user circle"}),"Top 5"),i.a.createElement(fe.a.Content,{active:1===a},i.a.createElement(xe.a,null,s&&Object.values(s).length>0?this.displayTopPosters(s):i.a.createElement(M.a,{size:20,disableShrink:!0}))),i.a.createElement(fe.a.Title,{active:0===a,index:0,onClick:this.setActiveIndex},i.a.createElement(L.a,{name:"dropdown"}),i.a.createElement(L.a,{name:"pencil alternate"}),"Created By"),i.a.createElement(fe.a.Content,{active:0===a,className:"animated fadeInUp delay-0.5s"},i.a.createElement(B.a,{src:r.createdBy.avatar}),i.a.createElement(De.a,{variant:"body1",style:{opacity:.8,fontStyle:"italic",textAlign:"center"}},r.createdBy.name.toLowerCase()))))}}]),a}(o.Component),ze=function(e){var t=e.currentChannel,a=e.authenticatedUser,n=e.isPrivateChannel,r=e.userPost,s=e.userColors,l=e.firstLoad;return i.a.createElement(d.a,{container:!0,className:"app",style:{background:"".concat(s.primaryColor)}},i.a.createElement(x,{key:a&&a.uid,currentUser:a}),i.a.createElement(ve,{authenticatedUser:a,userColors:s}),i.a.createElement(d.a,{style:{marginLeft:"8em"}},i.a.createElement(d.a.Column,{mobile:16,largeScreen:12,widescreen:12},i.a.createElement(Me,{userColors:s,key:t&&t.id,currentChannel:t,authenticatedUser:a,isPrivateChannel:n})),i.a.createElement(d.a.Column,{mobile:16,largeScreen:4,widescreen:4},i.a.createElement("span",null,i.a.createElement(Fe,{key:t&&t.id,isPrivateChannel:n,currentChannel:t,userPost:r,firstLoad:l})))))},Be=(a(610),a(342)),Ge=a.n(Be)()(Object(g.b)((function(e){return{UI:e.UI,authenticatedUser:e.user.authenticatedUser,currentChannel:e.channel.currentChannel,isPrivateChannel:e.channel.isPrivateChannel,userPost:e.channel.userPost,colors:e.colors,firstLoad:e.UI.firstLoad}}))((function(e){var t=e.currentChannel,a=e.authenticatedUser,n=e.isPrivateChannel,r=e.userPost,s=e.colors;e.firstLoad;return i.a.createElement(d.a,{container:!0},i.a.createElement(d.a.Column,null,i.a.createElement(ze,{key:a&&a.uid,authenticatedUser:a,currentChannel:t,isPrivateChannel:n,userPost:r,userColors:s})))}))),We=a(36),He=a(109),Ve=a(683),Ke=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).handleLogin=function(t){t.preventDefault(),e.props.authenticateGoogle(e.props.history)},e}return Object(r.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){return i.a.createElement("button",{type:"button",className:"google-button",onClick:this.handleLogin},i.a.createElement("span",{className:"google-button__icon"},i.a.createElement("svg",{viewBox:"0 0 366 372",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:"M125.9 10.2c40.2-13.9 85.3-13.6 125.3 1.1 22.2 8.2 42.5 21 59.9 37.1-5.8 6.3-12.1 12.2-18.1 18.3l-34.2 34.2c-11.3-10.8-25.1-19-40.1-23.6-17.6-5.3-36.6-6.1-54.6-2.2-21 4.5-40.5 15.5-55.6 30.9-12.2 12.3-21.4 27.5-27 43.9-20.3-15.8-40.6-31.5-61-47.3 21.5-43 60.1-76.9 105.4-92.4z",id:"Shape",fill:"#EA4335"}),i.a.createElement("path",{d:"M20.6 102.4c20.3 15.8 40.6 31.5 61 47.3-8 23.3-8 49.2 0 72.4-20.3 15.8-40.6 31.6-60.9 47.3C1.9 232.7-3.8 189.6 4.4 149.2c3.3-16.2 8.7-32 16.2-46.8z",id:"Shape",fill:"#FBBC05"}),i.a.createElement("path",{d:"M361.7 151.1c5.8 32.7 4.5 66.8-4.7 98.8-8.5 29.3-24.6 56.5-47.1 77.2l-59.1-45.9c19.5-13.1 33.3-34.3 37.2-57.5H186.6c.1-24.2.1-48.4.1-72.6h175z",id:"Shape",fill:"#4285F4"}),i.a.createElement("path",{d:"M81.4 222.2c7.8 22.9 22.8 43.2 42.6 57.1 12.4 8.7 26.6 14.9 41.4 17.9 14.6 3 29.7 2.6 44.4.1 14.6-2.6 28.7-7.9 41-16.2l59.1 45.9c-21.3 19.7-48 33.1-76.2 39.6-31.2 7.1-64.2 7.3-95.2-1-24.6-6.5-47.7-18.2-67.6-34.1-20.9-16.6-38.3-38-50.4-62 20.3-15.7 40.6-31.5 60.9-47.3z",fill:"#34A853"}))),i.a.createElement("span",{className:"google-button__text"},"Google"))}}]),a}(o.Component),qe={authenticateGoogle:function(){return function(e){e({type:"LOADING_UI"});var t=new f.auth.GoogleAuthProvider;e(S(t,["profile","email"]))}}},Xe=Object(g.b)((function(e){return{user:e.user,UI:e.UI}}),qe)(Ke),Je=a(688),Qe=a(343),$e=a.n(Qe),Ye=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).handleLogin=function(t){t.preventDefault(),e.props.authenticateGithub(e.props.history)},e}return Object(r.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){return i.a.createElement(Je.a,{variant:"contained",color:"secondary",onClick:this.handleLogin},i.a.createElement($e.a,null),i.a.createElement("span",null,"GitHub"))}}]),a}(o.Component),Ze={authenticateGithub:function(){return function(e){e({type:"LOADING_UI"});var t=new f.auth.GithubAuthProvider;e(S(t,["repo"]))}}},et=Object(g.b)((function(e){return{user:e.user,UI:e.UI}}),Ze)(Ye),tt=a(682),at=a(179),nt=a.n(at),rt={palette:{primary:{light:"#33c9dc",main:"#607d8b",dark:"#795548",contrastText:"#fff"},secondary:{light:"#ff6333",main:"#424242",dark:"#795548",contrastText:"#fff"}}},st=nt()(rt),lt=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a,e.props.history)},e.handleChange=function(t){e.setState(Object(re.a)({},t.target.name,t.target.value))},e.state={email:"",password:"",errors:{}},e}return Object(r.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props.UI.loading,t=this.state.errors;return i.a.createElement(tt.a,{theme:st},i.a.createElement(d.a,{container:!0,columns:"3"},i.a.createElement(d.a.Column,null),i.a.createElement(d.a,{style:{marginTop:50,background:"#a5aba2",width:440}},i.a.createElement(d.a.Row,{style:{padding:"1.2em",margin:0},className:"animated rotateInDownRight delay-1s"},i.a.createElement(F.a,{inverted:!0,floated:"left",as:"h2",className:"animated pulse delay-3s",style:{marginBottom:40}},i.a.createElement("span",null," ",i.a.createElement(L.a,{name:"meetup",size:"huge"})),i.a.createElement(F.a.Content,null,"Meet-Friends ")),i.a.createElement("br",null),i.a.createElement(F.a,{inverted:!0,floated:"left",as:"h2",style:{color:"#615c1e"}},i.a.createElement(F.a.Content,{className:"animated slideInLeft"},t.message&&i.a.createElement(De.a,{variant:"body2"},t.message)," "))),i.a.createElement(d.a.Row,null,i.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit,className:"login"},i.a.createElement(Ve.a,{id:"email",name:"email",type:"email",label:"Email",value:this.state.email,onChange:this.handleChange,helperText:t.email,error:!!t.email,color:"primary",InputProps:{style:{color:"#fff"}},variant:"outlined",fullWidth:!0})," ",i.a.createElement("br",null),i.a.createElement(Ve.a,{id:"password",name:"password",type:"password",label:"Password",value:this.state.password,onChange:this.handleChange,helperText:t.password,error:!!t.password,color:"primary",InputProps:{style:{color:"#fff"}}})," ",i.a.createElement("br",null)," ",i.a.createElement("br",null),t.general&&i.a.createElement(De.a,{variant:"body2"},t.general),i.a.createElement(Je.a,{type:"submit",variant:"contained",id:"button",color:"primary",disabled:e},"Login",e&&i.a.createElement(M.a,{size:30,disableShrink:!0})),i.a.createElement("br",null),i.a.createElement("small",{className:""}," ","Don't have an account ? ",i.a.createElement(He.b,{to:"/signup"},"Signup Here")," "),i.a.createElement("br",null),i.a.createElement("span",null," ",i.a.createElement(L.a,{name:"meetup",size:"huge"})),i.a.createElement(Xe,null),i.a.createElement(et,null))))))}}]),a}(o.Component),ot=Object(g.b)((function(e){return{user:e.user,UI:e.UI}}),{loginUser:function(e){return function(t){t({type:"LOADING_UI"}),E.a.post("/login",e).then((function(){t(b(e.email,e.password))})).catch((function(e){t({type:"SET_ERRORS",payload:e.response.data})}))}}})(lt),it=nt()(rt),ct=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault();var a={email:e.state.email,username:e.state.username,password:e.state.password,confirmPassword:e.state.confirmPassword};e.props.signupUser(a,e.props.history)},e.handleChange=function(t){e.setState(Object(re.a)({},t.target.name,t.target.value))},e.state={email:"",username:"",password:"",confirmPassword:"",errors:{}},e}return Object(r.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props.UI.loading,t=this.state.errors;return i.a.createElement(tt.a,{theme:it},i.a.createElement(d.a,{container:!0,columns:"3"},i.a.createElement(d.a.Column,null),i.a.createElement(d.a,{style:{marginTop:50,background:"#a5aba2",width:440}},i.a.createElement(d.a.Row,{style:{padding:"1.2em",margin:0},className:"animated rotateInDownRight delay-1s"},i.a.createElement(F.a,{inverted:!0,floated:"left",as:"h2",className:"animated pulse delay-3s",style:{marginBottom:40}},i.a.createElement("span",null," ",i.a.createElement(L.a,{name:"meetup",size:"huge"})),i.a.createElement(F.a.Content,null,"Meet-Friends ")),i.a.createElement("br",null),i.a.createElement(F.a,{inverted:!0,floated:"left",as:"h2",style:{color:"#615c1e"}},i.a.createElement(F.a.Content,{className:"animated slideInLeft"},t.message&&i.a.createElement(De.a,{variant:"body2"},t.message)," "))),i.a.createElement(d.a.Row,null,i.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit,className:"login"},i.a.createElement(Ve.a,{id:"email",name:"email",type:"email",label:"Email",value:this.state.email,onChange:this.handleChange,helperText:t.email,error:!!t.email,color:"primary",InputProps:{style:{color:"#fff"}},variant:"outlined",fullWidth:!0})," ",i.a.createElement("br",null),i.a.createElement(Ve.a,{id:"username",name:"username",type:"username",label:"Username",value:this.state.username,onChange:this.handleChange,helperText:t.username,error:!!t.username,color:"primary",InputProps:{style:{color:"#fff"}},fullWidth:!0})," ",i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(Ve.a,{id:"password",name:"password",type:"password",label:"Password",value:this.state.password,onChange:this.handleChange,helperText:t.password,error:!!t.password,color:"primary",InputProps:{style:{color:"#fff"}},variant:"outlined"})," ",i.a.createElement("br",null),i.a.createElement(Ve.a,{id:"confirmPassword",name:"confirmPassword",type:"confirmPassword",label:"Confirm Password",value:this.state.confirmPassword,onChange:this.handleChange,helperText:t.confirmPassword,error:!!t.confirmPassword,color:"primary",InputProps:{style:{color:"#fff"}}})," ",i.a.createElement("br",null)," ",i.a.createElement("br",null),t.general&&i.a.createElement(De.a,{variant:"body2"},t.general),i.a.createElement(Je.a,{type:"submit",variant:"contained",id:"button",color:"primary",disabled:e},"Signup",e&&i.a.createElement(M.a,{size:30,disableShrink:!0})),i.a.createElement("br",null),i.a.createElement("small",{className:""},"Already have an account ? ",i.a.createElement(He.b,{to:"/login"},"Login Here")," "),i.a.createElement("br",null),i.a.createElement("span",null," ",i.a.createElement(L.a,{name:"meetup",size:"huge"})),i.a.createElement(Xe,null),i.a.createElement(et,null))))))}}]),a}(o.Component),ut=Object(g.b)((function(e){return{user:e.user,UI:e.UI}}),{signupUser:function(e){return function(t){t({type:"LOADING_UI"}),E.a.post("/signup",e).then((function(){t(b(e.email,e.password))})).catch((function(e){t({type:"SET_ERRORS",payload:e.response.data})}))}}})(ct),dt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function mt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}E.a.defaults.baseURL="https://europe-west1-portfolio-alex-eb3ef.cloudfunctions.net/api";var ht=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"setToken",value:function(e,t,a){e&&(E.a.defaults.headers.common.Authorization=e,this.props.setAuthenticatedUser(a))}},{key:"componentDidMount",value:function(){var e=this;f.auth().onAuthStateChanged((function(t){if(t){var a=t.xa,n=t.email,r="Bearer ".concat(a);e.setToken(r,n,t),Z.dispatch({type:"STOP_LOADING_UI"}),e.props.history.push("/"),1e3*C()(a).exp<Date.now()&&(Z.dispatch({type:"SET_UNAUTHENTICATED"}),e.props.history.push("/login"))}else e.props.history.push("/login")}))}},{key:"render",value:function(){return i.a.createElement(We.c,null,i.a.createElement(We.a,{exact:!0,path:"/",component:Ge}),i.a.createElement(We.a,{path:"/login",component:ot}),i.a.createElement(We.a,{path:"/signup",component:ut}))}}]),a}(o.Component),pt=Object(We.f)(Object(g.b)((function(e){return{loading:e.UI.loading,channel:e.channel}}),{setAuthenticatedUser:function(e){return{type:"SET_AUTHENTICATED",payload:e}}})(ht));u.a.render(i.a.createElement(g.a,{store:Z},i.a.createElement(He.a,null,i.a.createElement(pt,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");dt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):mt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):mt(t,e)}))}}()}},[[363,1,2]]]);
//# sourceMappingURL=main.bcc7dd67.chunk.js.map