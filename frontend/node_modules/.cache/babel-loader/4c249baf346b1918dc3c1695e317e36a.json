{"ast":null,"code":"import { LOADING_USER, LOADING_UI, SET_GOOGLE_USER } from \"../store/types\";\nimport * as firebase from \"firebase\";\nimport Config from \"../../config/config\";\nimport axios from \"axios\";\nfirebase.initializeApp(Config);\nexport const authenticateGoogle = () => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  const provider = new firebase.auth.GoogleAuthProvider();\n  provider.addScope('profile');\n  provider.addScope('email');\n  firebase.auth().signInWithPopup(provider).then(async result => {\n    if (result.credential) {\n      const {\n        user,\n        credential\n      } = result;\n      const {\n        accessToken\n      } = credential;\n      const {\n        displayName,\n        email,\n        uid\n      } = user;\n      const userData = {\n        email: email,\n        username: displayName\n      };\n      localStorage.setItem(\"token\", accessToken);\n      await dispatch(googleSignup(userData, uid));\n    }\n  }).catch(err => console.log(err));\n};\nexport const googleSignup = (userData, userId, history) => dispatch => {\n  dispatch({\n    type: LOADING_USER\n  });\n  axios.post(`/google/${userId}`, userData).then(res => {\n    dispatch({\n      type: SET_GOOGLE_USER,\n      payload: res.data\n    });\n    history.push(\"/\");\n    window.location.reload;\n  }).catch(err => console.log(err));\n};","map":{"version":3,"sources":["/home/alexkhan/Documents/meet-friends/frontend/src/redux/actions/userActions.js"],"names":["LOADING_USER","LOADING_UI","SET_GOOGLE_USER","firebase","Config","axios","initializeApp","authenticateGoogle","dispatch","type","provider","auth","GoogleAuthProvider","addScope","signInWithPopup","then","result","credential","user","accessToken","displayName","email","uid","userData","username","localStorage","setItem","googleSignup","catch","err","console","log","userId","history","post","res","payload","data","push","window","location","reload"],"mappings":"AAAA,SAAQA,YAAR,EAAqBC,UAArB,EAAiCC,eAAjC,QAAuD,gBAAvD;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACAF,QAAQ,CAACG,aAAT,CAAuBF,MAAvB;AAGA,OAAO,MAAMG,kBAAkB,GAAG,MAAOC,QAAD,IAAc;AAClDA,EAAAA,QAAQ,CAAC;AAACC,IAAAA,IAAI,EAAER;AAAP,GAAD,CAAR;AACA,QAAMS,QAAQ,GAAG,IAAIP,QAAQ,CAACQ,IAAT,CAAcC,kBAAlB,EAAjB;AACAF,EAAAA,QAAQ,CAACG,QAAT,CAAkB,SAAlB;AACAH,EAAAA,QAAQ,CAACG,QAAT,CAAkB,OAAlB;AACAV,EAAAA,QAAQ,CAACQ,IAAT,GAAgBG,eAAhB,CAAgCJ,QAAhC,EACCK,IADD,CACM,MAAOC,MAAP,IAAiB;AACnB,QAAIA,MAAM,CAACC,UAAX,EAAuB;AACvB,YAAM;AAACC,QAAAA,IAAD;AAAMD,QAAAA;AAAN,UAAoBD,MAA1B;AACA,YAAM;AAACG,QAAAA;AAAD,UAAgBF,UAAtB;AACA,YAAO;AAACG,QAAAA,WAAD;AAAcC,QAAAA,KAAd;AAAoBC,QAAAA;AAApB,UAA2BJ,IAAlC;AACA,YAAMK,QAAQ,GAAG;AACZF,QAAAA,KAAK,EAAEA,KADK;AAEZG,QAAAA,QAAQ,EAAEJ;AAFE,OAAjB;AAIAK,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BP,WAA9B;AACA,YAAMX,QAAQ,CAACmB,YAAY,CAACJ,QAAD,EAAUD,GAAV,CAAb,CAAd;AACC;AACF,GAbH,EAcCM,KAdD,CAcQC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAdhB;AAiBH,CAtBM;AAyBP,OAAO,MAAMF,YAAY,GAAG,CAACJ,QAAD,EAAUS,MAAV,EAAiBC,OAAjB,KAA8BzB,QAAD,IAAc;AACnEA,EAAAA,QAAQ,CAAC;AAACC,IAAAA,IAAI,EAAET;AAAP,GAAD,CAAR;AACAK,EAAAA,KAAK,CAAC6B,IAAN,CAAY,WAAUF,MAAO,EAA7B,EAA+BT,QAA/B,EACCR,IADD,CACMoB,GAAG,IAAG;AACR3B,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAEP,eADD;AAELkC,MAAAA,OAAO,EAAED,GAAG,CAACE;AAFR,KAAD,CAAR;AAIAJ,IAAAA,OAAO,CAACK,IAAR,CAAa,GAAb;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,GARD,EASCb,KATD,CASQC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAThB;AAWH,CAbM","sourcesContent":["import {LOADING_USER,LOADING_UI, SET_GOOGLE_USER} from \"../store/types\"\nimport * as firebase from \"firebase\"\nimport Config from \"../../config/config\"\nimport axios from \"axios\"\nfirebase.initializeApp(Config)\n\n\nexport const authenticateGoogle = () => (dispatch) => {\n    dispatch({type: LOADING_UI})\n    const provider = new firebase.auth.GoogleAuthProvider()\n    provider.addScope('profile');\n    provider.addScope('email');\n    firebase.auth().signInWithPopup(provider)\n    .then(async (result) =>{\n        if (result.credential) {\n        const {user,credential} = result   \n        const {accessToken} = credential    \n        const  {displayName, email,uid} = user\n        const userData = {\n             email: email,\n             username: displayName\n        }\n        localStorage.setItem(\"token\", accessToken)\n        await dispatch(googleSignup(userData,uid))\n        }     \n      }) \n    .catch((err) => console.log(err));\n\n\n}\n\n\nexport const googleSignup = (userData,userId,history) => (dispatch) => {\n    dispatch({type: LOADING_USER})\n    axios.post(`/google/${userId}`,userData)\n    .then(res=> {\n        dispatch({\n            type: SET_GOOGLE_USER,\n            payload: res.data\n        })\n        history.push(\"/\")\n        window.location.reload\n    })\n    .catch((err) => console.log(err));\n\n}"]},"metadata":{},"sourceType":"module"}