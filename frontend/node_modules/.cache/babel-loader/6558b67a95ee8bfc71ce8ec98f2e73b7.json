{"ast":null,"code":"var _jsxFileName = \"/home/alexkhan/Documents/meet-friends/frontend/src/components/messages/messageForm.js\";\nimport React, { Component } from \"react\";\nimport { Segment, Button, Input } from \"semantic-ui-react\";\nimport firebase from \"../../Auth/firebase\";\nimport FileModal from \"./fileModal\";\nimport uuidv4 from \"uuid/v4\";\nimport ProgressBar from \"./ProgressBar\";\nimport { Loader, Dimmer } from \"semantic-ui-react\";\n\nclass messageForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      storageRef: firebase.storage().ref(),\n      uploadState: \"\",\n      uploadTask: null,\n      message: \"\",\n      loading: false,\n      channel: this.props.currentChannel,\n      user: this.props.currentUser,\n      messagesRef: this.props.messagesRef,\n      errors: [],\n      modal: false,\n      percentUploaded: 0\n    };\n\n    this.openModal = () => this.setState({\n      modal: true\n    });\n\n    this.closeModal = () => this.setState({\n      modal: false\n    });\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.createMessage = (fileUrl = null) => {\n      const {\n        user\n      } = this.state;\n      const message = {\n        timestamp: firebase.database.ServerValue.TIMESTAMP,\n        user: {\n          id: user.userId,\n          name: user.username,\n          avatar: user.profileImage\n        }\n      };\n\n      if (fileUrl !== null) {\n        message[\"image\"] = fileUrl;\n      } else {\n        message[\"content\"] = this.state.message;\n      }\n\n      return message;\n    };\n\n    this.uploadFile = (file, metadata) => {\n      const pathToUpload = this.state.channel.id;\n      const ref = this.props.messagesRef;\n      const filePath = `chat/public/${uuidv4()}.jpg`;\n      this.setState({\n        uploadState: \"uploading\",\n        uploadTask: this.state.storageRef.child(filePath).put(file, metadata)\n      }, () => {\n        this.state.uploadTask.on(\"state_changed\", snap => {\n          const percentUploaded = Math.round(snap.bytesTransferred / snap.totalBytes * 100);\n          this.setState({\n            percentUploaded\n          });\n        }, err => {\n          console.error(err);\n          this.setState({\n            errors: this.state.errors.concat(err),\n            uploadState: \"error\",\n            uploadTask: null\n          });\n        }, () => {\n          this.state.uploadTask.snapshot.ref.getDownloadURL().then(downloadUrl => {\n            this.sendFileMessage(downloadUrl, ref, pathToUpload);\n          }).catch(err => {\n            console.error(err);\n            this.setState({\n              errors: this.state.errors.concat(err),\n              uploadState: \"error\",\n              uploadTask: null\n            });\n          });\n        });\n      });\n    };\n\n    this.sendMessage = () => {\n      const {\n        message,\n        channel,\n        messagesRef\n      } = this.state;\n\n      if (message) {\n        this.setState({\n          loading: true\n        });\n        messagesRef.child(channel.id).push().set(this.createMessage()).then(() => {\n          this.setState({\n            loading: false,\n            message: \"\",\n            errors: []\n          });\n        }).catch(error => {\n          console.error(error);\n          this.setState({\n            loading: false,\n            errors: this.state.errors.concat(error)\n          });\n        });\n      } else {\n        this.setState({\n          errors: this.state.errors.concat({\n            message: \"Add a message\"\n          })\n        });\n      }\n    };\n\n    this.sendFileMessage = (fileUrl, ref, pathToUpload) => {\n      ref.child(pathToUpload).push().set(this.createMessage(fileUrl)).then(() => {\n        this.setState({\n          uploadState: \"done\"\n        });\n      }).catch(err => {\n        console.error(err);\n        this.setState({\n          errors: this.state.errors.concat(err)\n        });\n      });\n    };\n  }\n\n  render() {\n    const {\n      errors,\n      message,\n      loading,\n      modal,\n      uploadState,\n      percentUploaded,\n      user\n    } = this.state;\n\n    const getLength = obj => {\n      if (obj !== null) return 0;\n      const lengthUser = Object.keys(obj).length;\n      return lengthUser;\n    };\n\n    return /*#__PURE__*/React.createElement(Segment, {\n      className: \"message__form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      fluid: true,\n      name: \"message\",\n      style: {\n        marginBottom: \"0.7em\"\n      },\n      label: /*#__PURE__*/React.createElement(Button, {\n        icon: \"add\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 18\n        }\n      }),\n      value: message,\n      labelPosition: \"left\",\n      placeholder: \"Write your message\",\n      onChange: this.handleChange,\n      className: errors.some(error => error.message.includes(\"message\")) ? \"error\" : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }\n    }), getLength(user) > 0 ? /*#__PURE__*/React.createElement(Button.Group, {\n      icon: true,\n      widths: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"orange\",\n      content: \"Add Reply\",\n      labelPosition: \"left\",\n      icon: \"edit\",\n      onClick: this.sendMessage,\n      disabled: loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      color: \"teal\",\n      content: \"Upload Media\",\n      labelPosition: \"right\",\n      icon: \"cloud upload\",\n      onClick: this.openModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }\n    })) : /*#__PURE__*/React.createElement(Loader, {\n      size: \"huge\",\n      content: \"Please Wait loding chat...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(FileModal, {\n      modal: modal,\n      closeModal: this.closeModal,\n      uploadFile: this.uploadFile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(ProgressBar, {\n      uploadState: uploadState,\n      percentUploaded: percentUploaded,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default messageForm;","map":{"version":3,"sources":["/home/alexkhan/Documents/meet-friends/frontend/src/components/messages/messageForm.js"],"names":["React","Component","Segment","Button","Input","firebase","FileModal","uuidv4","ProgressBar","Loader","Dimmer","messageForm","state","storageRef","storage","ref","uploadState","uploadTask","message","loading","channel","props","currentChannel","user","currentUser","messagesRef","errors","modal","percentUploaded","openModal","setState","closeModal","handleChange","event","target","name","value","createMessage","fileUrl","timestamp","database","ServerValue","TIMESTAMP","id","userId","username","avatar","profileImage","uploadFile","file","metadata","pathToUpload","filePath","child","put","on","snap","Math","round","bytesTransferred","totalBytes","err","console","error","concat","snapshot","getDownloadURL","then","downloadUrl","sendFileMessage","catch","sendMessage","push","set","render","getLength","obj","lengthUser","Object","keys","length","marginBottom","some","includes"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Segment, Button, Input } from \"semantic-ui-react\";\nimport firebase from \"../../Auth/firebase\";\nimport FileModal from \"./fileModal\";\nimport uuidv4 from \"uuid/v4\";\nimport ProgressBar from \"./ProgressBar\";\nimport { Loader, Dimmer } from \"semantic-ui-react\";\n\n\nclass messageForm extends Component {\n  state = {\n    storageRef: firebase.storage().ref(),\n    uploadState: \"\",\n    uploadTask: null,\n    message: \"\",\n    loading: false,\n    channel: this.props.currentChannel,\n    user: this.props.currentUser,\n    messagesRef: this.props.messagesRef,\n    errors: [],\n    modal: false,\n    percentUploaded: 0,\n  };\n\n  openModal = () => this.setState({ modal: true });\n  closeModal = () => this.setState({ modal: false });\n\n  handleChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  createMessage = (fileUrl = null) => {\n    const { user } = this.state;\n    const message = {\n      timestamp: firebase.database.ServerValue.TIMESTAMP,\n      user: {\n        id: user.userId,\n        name: user.username,\n        avatar: user.profileImage,\n      },\n    };\n    if (fileUrl !== null) {\n      message[\"image\"] = fileUrl;\n    } else {\n      message[\"content\"] = this.state.message;\n    }\n    return message;\n  };\n\n  uploadFile = (file, metadata) => {\n    const pathToUpload = this.state.channel.id;\n    const ref = this.props.messagesRef;\n    const filePath = `chat/public/${uuidv4()}.jpg`;\n\n    this.setState(\n      {\n        uploadState: \"uploading\",\n        uploadTask: this.state.storageRef.child(filePath).put(file, metadata),\n      },\n      () => {\n        this.state.uploadTask.on(\n          \"state_changed\",\n          (snap) => {\n            const percentUploaded = Math.round(\n              (snap.bytesTransferred / snap.totalBytes) * 100\n            );\n            this.setState({ percentUploaded });\n          },\n          (err) => {\n            console.error(err);\n            this.setState({\n              errors: this.state.errors.concat(err),\n              uploadState: \"error\",\n              uploadTask: null,\n            });\n          },\n          () => {\n            this.state.uploadTask.snapshot.ref\n              .getDownloadURL()\n              .then((downloadUrl) => {\n                this.sendFileMessage(downloadUrl, ref, pathToUpload);\n              })\n              .catch((err) => {\n                console.error(err);\n                this.setState({\n                  errors: this.state.errors.concat(err),\n                  uploadState: \"error\",\n                  uploadTask: null,\n                });\n              });\n          }\n        );\n      }\n    );\n  };\n\n  sendMessage = () => {\n    const { message, channel, messagesRef } = this.state;\n    if (message) {\n      this.setState({ loading: true });\n      messagesRef\n        .child(channel.id)\n        .push()\n        .set(this.createMessage())\n        .then(() => {\n          this.setState({ loading: false, message: \"\", errors: [] });\n        })\n        .catch((error) => {\n          console.error(error);\n          this.setState({\n            loading: false,\n            errors: this.state.errors.concat(error),\n          });\n        });\n    } else {\n      this.setState({\n        errors: this.state.errors.concat({ message: \"Add a message\" }),\n      });\n    }\n  };\n\n  sendFileMessage = (fileUrl, ref, pathToUpload) => {\n    ref\n      .child(pathToUpload)\n      .push()\n      .set(this.createMessage(fileUrl))\n      .then(() => {\n        this.setState({ uploadState: \"done\" });\n      })\n      .catch((err) => {\n        console.error(err);\n        this.setState({\n          errors: this.state.errors.concat(err),\n        });\n      });\n  };\n\n  render() {\n    const {\n      errors,\n      message,\n      loading,\n      modal,\n      uploadState,\n      percentUploaded,\n      user,\n    } = this.state;\n\n    const getLength = (obj)=> {\n      if(obj !== null) return 0\n      const lengthUser = Object.keys(obj).length\n      return lengthUser \n    }\n\n    return (\n      <Segment className=\"message__form\">\n        <Input\n          fluid\n          name=\"message\"\n          style={{ marginBottom: \"0.7em\" }}\n          label={<Button icon={\"add\"} />}\n          value={message}\n          labelPosition=\"left\"\n          placeholder=\"Write your message\"\n          onChange={this.handleChange}\n          className={\n            errors.some((error) => error.message.includes(\"message\"))\n              ? \"error\"\n              : \"\"\n          }\n        />\n        {getLength(user) > 0 ?(\n          <Button.Group icon widths=\"2\">\n          <Button\n            color=\"orange\"\n            content=\"Add Reply\"\n            labelPosition=\"left\"\n            icon=\"edit\"\n            onClick={this.sendMessage}\n            disabled={loading}\n          />\n          <Button\n            color=\"teal\"\n            content=\"Upload Media\"\n            labelPosition=\"right\"\n            icon=\"cloud upload\"\n            onClick={this.openModal}\n          />\n        </Button.Group>\n        ):(\n          <Loader size=\"huge\" content=\"Please Wait loding chat...\" />\n        )}\n        <FileModal\n            modal={modal}\n            closeModal={this.closeModal}\n            uploadFile={this.uploadFile}\n          /> \n        <ProgressBar\n          uploadState={uploadState}\n          percentUploaded={percentUploaded}\n        />\n      </Segment>\n    );\n  }\n}\n\nexport default messageForm;\n"]},"metadata":{},"sourceType":"module"}