{"ast":null,"code":"var _jsxFileName = \"/home/alexkhan/Documents/meet-friends/frontend/src/index.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter as Router, Route, Switch, withRouter } from \"react-router-dom\";\nimport login from './pages/login/login';\nimport signup from './pages/signup/signup';\nimport { Provider, connect } from \"react-redux\";\nimport store from \"./redux/store/store\";\nimport firebase from \"./Auth/firebase\";\nimport * as serviceWorker from './serviceWorker';\nimport { SET_UNAUTHENTICATED, STOP_LOADING_UI } from './redux/store/types';\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport { setAuthenticatedUser, getCurrentUser } from './redux/actions/actions';\n\nclass Root extends Component {\n  setToken(token, email, user) {\n    if (token) {\n      axios.defaults.headers.common[\"Authorization\"] = token;\n      this.props.getCurrentUser(email);\n      this.props.setAuthenticatedUser(user);\n    }\n  }\n\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        const {\n          xa,\n          email\n        } = user;\n        const token = `Bearer ${xa}`;\n        this.setToken(token, email, user);\n        store.dispatch({\n          type: STOP_LOADING_UI\n        });\n        this.props.history.push(\"/\");\n\n        if (jwt_decode(xa)['exp'] * 1000 < Date.now()) {\n          store.dispatch({\n            type: SET_UNAUTHENTICATED\n          });\n          this.props.history.push(\"/login\");\n        }\n      } else {\n        this.props.history.push('/login', '/signup');\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: App,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      component: login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 12\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/signup\",\n      component: signup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 12\n      }\n    }));\n  }\n\n}\n\nconst mapStateFromProps = state => ({\n  loading: state.UI.loading,\n  channel: state.channel\n});\n\nconst RootWithAuth = withRouter(connect(mapStateFromProps, {\n  setAuthenticatedUser,\n  getCurrentUser\n})(Root));\nReactDOM.render( /*#__PURE__*/React.createElement(Provider, {\n  store: store,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(Router, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 2\n  }\n}, /*#__PURE__*/React.createElement(RootWithAuth, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 4\n  }\n}))), document.getElementById('root'));\nserviceWorker.register();","map":{"version":3,"sources":["/home/alexkhan/Documents/meet-friends/frontend/src/index.js"],"names":["React","Component","ReactDOM","App","BrowserRouter","Router","Route","Switch","withRouter","login","signup","Provider","connect","store","firebase","serviceWorker","SET_UNAUTHENTICATED","STOP_LOADING_UI","axios","jwt_decode","setAuthenticatedUser","getCurrentUser","Root","setToken","token","email","user","defaults","headers","common","props","componentDidMount","auth","onAuthStateChanged","xa","dispatch","type","history","push","Date","now","render","mapStateFromProps","state","loading","UI","channel","RootWithAuth","document","getElementById","register"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter as Router, Route, Switch, withRouter } from \"react-router-dom\";\nimport login from './pages/login/login'\nimport signup from './pages/signup/signup'\n\nimport {Provider,connect} from \"react-redux\"\nimport store from \"./redux/store/store\"\nimport firebase from \"./Auth/firebase\"\nimport * as serviceWorker from './serviceWorker';\nimport {  SET_UNAUTHENTICATED, STOP_LOADING_UI } from './redux/store/types';\nimport axios from \"axios\"\nimport jwt_decode from \"jwt-decode\"\nimport {setAuthenticatedUser,getCurrentUser} from './redux/actions/actions'\n\nclass Root extends Component {\n\n  setToken(token,email,user){\n    if(token){\n      axios.defaults.headers.common[\"Authorization\"] = token\n      this.props.getCurrentUser(email)\n      this.props.setAuthenticatedUser(user)\n    }\n  }\n\n  componentDidMount(){\n    firebase.auth().onAuthStateChanged(user=> {\n      if(user){\n        const {xa,email} = user\n        const token = `Bearer ${xa}`\n        this.setToken(token,email,user)\n        store.dispatch({type:STOP_LOADING_UI})\n        this.props.history.push(\"/\")\n        \n       if(jwt_decode(xa)['exp'] * 1000 < Date.now()){ \n         store.dispatch({type: SET_UNAUTHENTICATED})\n         this.props.history.push(\"/login\") \n        }\n      }\n      else{\n        this.props.history.push( '/login','/signup') \n\n      }\n      \n    })\n\n  }  \n\n  render(){\n    return(\n         <Switch>\n            <Route exact path=\"/\" component={App} />\n           <Route  path=\"/login\" component={login} />\n           <Route  path=\"/signup\" component={signup} />\n          \n         </Switch>\n      \n      \n    )\n  }\n}\nconst mapStateFromProps = state => ({\n  loading: state.UI.loading,\n  channel: state.channel\n});\n\n\nconst RootWithAuth = withRouter(connect(mapStateFromProps, {setAuthenticatedUser,getCurrentUser})(Root))\n\n\nReactDOM.render(\n  <Provider store={store}>\n <Router>\n   <RootWithAuth/>\n </Router>\n </Provider>,\n\n  document.getElementById('root')\n);\nserviceWorker.register()\n\n"]},"metadata":{},"sourceType":"module"}